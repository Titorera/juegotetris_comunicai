{\rtf1\ansi\ansicpg1252\cocoartf2761
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;}
{\colortbl;\red255\green255\blue255;\red70\green137\blue204;\red23\green24\blue24;\red140\green211\blue254;
\red202\green202\blue202;\red109\green109\blue109;\red194\green126\blue101;\red212\green212\blue212;\red113\green192\blue131;
\red167\green197\blue152;\red109\green115\blue120;\red183\green111\blue247;\red54\green192\blue160;\red246\green124\blue48;
}
{\*\expandedcolortbl;;\cssrgb\c33725\c61176\c83922;\cssrgb\c11765\c12157\c12549;\cssrgb\c61176\c86275\c99608;
\cssrgb\c83137\c83137\c83137;\cssrgb\c50196\c50196\c50196;\cssrgb\c80784\c56863\c47059;\cssrgb\c86275\c86275\c86275;\cssrgb\c50588\c78824\c58431;
\cssrgb\c70980\c80784\c65882;\cssrgb\c50196\c52549\c54510;\cssrgb\c77255\c54118\c97647;\cssrgb\c23922\c78824\c69020;\cssrgb\c98039\c56471\c24314;
}
\margl1440\margr1440\vieww20160\viewh16600\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs28 \cf2 \cb3 \expnd0\expndtw0\kerning0
<!DOCTYPE\cf4  html\cf2 >\cf5 \cb1 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 <\cf2 html\cf5  \cf4 lang\cf6 =\cf7 "es"\cf6 >\cf5 \cb1 \
\cf6 \cb3 <\cf2 head\cf6 >\cf5 \cb1 \
\cb3     \cf6 <\cf2 meta\cf5  \cf4 charset\cf6 =\cf7 "UTF-8"\cf6 >\cf5 \cb1 \
\cb3     \cf6 <\cf2 meta\cf5  \cf4 name\cf6 =\cf7 "viewport"\cf5  \cf4 content\cf6 =\cf7 "width=device-width, initial-scale=1.0"\cf6 >\cf5 \cb1 \
\cb3     \cf6 <\cf2 title\cf6 >\cf5 Tetris Evaluativo\cf6 </\cf2 title\cf6 >\cf5  \cb1 \
\cb3     \cf6 <\cf2 link\cf5  \cf4 href\cf6 =\cf7 "https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Baloo+2:wght@400;500;700&display=swap"\cf5  \cf4 rel\cf6 =\cf7 "stylesheet"\cf6 >\cf5 \cb1 \
\cb3     \cf6 <\cf2 script\cf5  \cf4 src\cf6 =\cf7 "https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"\cf6 ></\cf2 script\cf6 >\cf5 \cb1 \
\cb3     \cf6 <\cf2 style\cf6 >\cf5 \cb1 \
\cb3         \cf2 body\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 background-color:\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 color:\cf5  #333\cf8 ;\cf5  \cb1 \
\cb3             \cf4 display:\cf5  \cf7 flex\cf8 ;\cf5 \cb1 \
\cb3             \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5 \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 justify-content:\cf5  \cf7 flex-start\cf8 ;\cf5 \cb1 \
\cb3             \cf4 min-height:\cf5  \cf10 100vh\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin:\cf5  \cf10 0\cf8 ;\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 10px\cf8 ;\cf5  \cf11 /* Padding general del body reducido */\cf5 \cb1 \
\cb3             \cf4 box-sizing:\cf5  \cf7 border-box\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 500\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 h1\cf5  \cf8 \{\cf5  \cf11 /* T\'edtulo Principal del Juego */\cf5 \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5  \cb1 \
\cb3             \cf4 color:\cf5  #ff6347\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 10px\cf8 ;\cf5  \cf11 /* Margen superior reducido */\cf5 \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 0px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 4.7em\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 text-transform:\cf5  \cf7 uppercase\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 #companyLogo\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 display:\cf5  \cf7 block\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin:\cf5  \cf10 0\cf5  \cf7 auto\cf5  \cf10 15px\cf5  \cf7 auto\cf8 ;\cf5  \cf11 /* Margen inferior reducido */\cf5 \cb1 \
\cb3             \cf4 max-width:\cf5  \cf10 180px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 max-height:\cf5  \cf10 70px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 8px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 #playerInfoMenu\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 flex\cf8 ;\cf5  \cb1 \
\cb3             \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5 \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 justify-content:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 width:\cf5  \cf10 100%\cf8 ;\cf5 \cb1 \
\cb3             \cf4 max-width:\cf5  \cf10 500px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 20px\cf8 ;\cf5  \cf11 /* Margen inferior reducido */\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 20px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #e0f7fa\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 20px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 8px\cf5  \cf10 16px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.1\cf7 )\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 #playerInfoMenu\cf5  \cf2 h2\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #00796b\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.6em\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 0\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 15px\cf8 ;\cf5  \cf11 /* Margen inferior reducido */\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .input-group\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 10px\cf8 ;\cf5  \cf11 /* Margen inferior reducido */\cf5 \cb1 \
\cb3             \cf4 width:\cf5  \cf10 100%\cf8 ;\cf5 \cb1 \
\cb3             \cf4 max-width:\cf5  \cf10 300px\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .input-group\cf5  \cf2 label\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 block\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #004d40\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 5px\cf8 ;\cf5 \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 left\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .input-group\cf5  \cf2 input\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 width:\cf5  \cf10 100%\cf8 ;\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 8px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 8px\cf8 ;\cf5 \cb1 \
\cb3             \cf4 border:\cf5  \cf10 2px\cf5  \cf7 solid\cf5  #4dd0e1\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-sizing:\cf5  \cf7 border-box\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf2 #playerInfoMenu\cf5  \cf2 button\cf5  \cf8 \{\cf5 \cb1 \
\cb3              \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #28a745\cf8 ;\cf5  \cb1 \
\cb3             \cf4 color:\cf5  \cf7 white\cf8 ;\cf5 \cb1 \
\cb3             \cf4 border:\cf5  \cf7 none\cf8 ;\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 10px\cf5  \cf10 25px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 10px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 cursor:\cf5  \cf7 pointer\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.1em\cf8 ;\cf5  \cb1 \
\cb3             \cf4 transition:\cf5  \cf7 background-color\cf5  \cf10 0.3s\cf8 ,\cf5  \cf7 transform\cf5  \cf10 0.1s\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 4px\cf5  #1e7e34\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 10px\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 #playerInfoMenu\cf5  \cf2 button:hover\cf8 \{\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #1e7e34\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3          \cf2 #playerInfoMenu\cf5  \cf2 button:active\cf8 \{\cf5 \cb1 \
\cb3             \cf4 transform:\cf5  \cf7 translateY(\cf10 2px\cf7 )\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 2px\cf5  #1e7e34\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf2 #levelSelectionMenu\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 none\cf8 ;\cf5  \cb1 \
\cb3             \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5 \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 justify-content:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 width:\cf5  \cf10 100%\cf8 ;\cf5 \cb1 \
\cb3             \cf4 max-width:\cf5  \cf10 720px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 20px\cf8 ;\cf5  \cf11 /* Margen inferior reducido */\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 20px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #bde0fe\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 20px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 8px\cf5  \cf10 16px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.1\cf7 )\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf2 #levelSelectionMenu\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #4a4a4a\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.8em\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 0\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 20px\cf8 ;\cf5  \cf11 /* Margen inferior reducido */\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-grid\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 grid\cf8 ;\cf5 \cb1 \
\cb3             \cf4 grid-template-columns:\cf5  \cf7 repeat(auto-fit\cf8 ,\cf5  \cf7 minmax(\cf10 130px\cf8 ,\cf5  \cf10 1fr\cf7 ))\cf8 ;\cf5  \cb1 \
\cb3             \cf4 gap:\cf5  \cf10 15px\cf8 ;\cf5  \cf11 /* Gap reducido */\cf5 \cb1 \
\cb3             \cf4 width:\cf5  \cf10 100%\cf8 ;\cf5 \cb1 \
\cb3             \cf4 justify-items:\cf5  \cf7 center\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-item-container\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 display:\cf5  \cf7 flex\cf8 ;\cf5 \cb1 \
\cb3             \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5 \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 gap:\cf5  \cf10 8px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-card\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 background-color:\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 color:\cf5  #333\cf8 ;\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 5px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 15px\cf8 ;\cf5 \cb1 \
\cb3             \cf4 cursor:\cf5  \cf7 pointer\cf8 ;\cf5 \cb1 \
\cb3             \cf4 transition:\cf5  \cf7 transform\cf5  \cf10 0.2s\cf5  \cf7 ease\cf8 ,\cf5  \cf7 box-shadow\cf5  \cf10 0.2s\cf5  \cf7 ease\cf8 ;\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 flex\cf8 ;\cf5  \cb1 \
\cb3             \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5 \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 justify-content:\cf5  \cf7 center\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 6px\cf5  \cf10 12px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.1\cf7 )\cf8 ;\cf5 \cb1 \
\cb3             \cf4 border:\cf5  \cf10 3px\cf5  \cf7 solid\cf5  \cf7 transparent\cf8 ;\cf5 \cb1 \
\cb3             \cf4 width:\cf5  \cf10 130px\cf8 ;\cf5   \cb1 \
\cb3             \cf4 height:\cf5  \cf10 130px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-card:hover\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 transform:\cf5  \cf7 translateY(\cf10 -7px\cf7 )\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 10px\cf5  \cf10 20px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.15\cf7 )\cf8 ;\cf5 \cb1 \
\cb3             \cf4 border-color:\cf5  #ffc857\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-card-animal-image\cf5  \cf8 \{\cf5   \cb1 \
\cb3             \cf4 width:\cf5  \cf10 120px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 height:\cf5  \cf10 120px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 object-fit:\cf5  \cf7 contain\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 10px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-number-display\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.1em\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5  \cb1 \
\cb3             \cf4 color:\cf5  #4895ef\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .game-container\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 none\cf8 ;\cf5  \cb1 \
\cb3             \cf4 flex-wrap:\cf5  \cf7 wrap\cf8 ;\cf5  \cb1 \
\cb3             \cf4 gap:\cf5  \cf10 15px\cf8 ;\cf5  \cf11 /* Gap reducido */\cf5 \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 flex-start\cf8 ;\cf5 \cb1 \
\cb3             \cf4 justify-content:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 15px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #bde0fe\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 20px\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 8px\cf5  \cf10 16px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.1\cf7 )\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 #gameCanvas\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 border:\cf5  \cf10 4px\cf5  \cf7 solid\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 8px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 background-color:\cf5  #4895ef\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf7 inset\cf5  \cf10 0\cf5  \cf10 0\cf5  \cf10 10px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.15\cf7 )\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .info-panel\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 flex\cf8 ;\cf5 \cb1 \
\cb3             \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5 \cb1 \
\cb3             \cf4 gap:\cf5  \cf10 8px\cf8 ;\cf5  \cf11 /* Gap reducido */\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 10px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #72cff9\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 15px\cf8 ;\cf5 \cb1 \
\cb3             \cf4 min-width:\cf5  \cf10 180px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 left\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 6px\cf5  \cf10 12px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.1\cf7 )\cf8 ;\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #2b2b2b\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .info-panel\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 0\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.2em\cf8 ;\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #00796b\cf8 ;\cf5  \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 6px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 8px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 5px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .info-panel\cf5  \cf2 p\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin:\cf5  \cf10 4px\cf5  \cf10 0\cf8 ;\cf5  \cf11 /* Margen reducido */\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.1em\cf8 ;\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5  \cb1 \
\cb3             \cf4 display:\cf5  \cf7 flex\cf8 ;\cf5  \cb1 \
\cb3             \cf4 justify-content:\cf5  \cf7 space-between\cf8 ;\cf5  \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .info-panel\cf5  \cf2 p\cf5  \cf2 span\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 color:\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 background-color:\cf5  #4895ef\cf8 ;\cf5  \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 2px\cf5  \cf10 6px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 5px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 0.85em\cf8 ;\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 #nextPieceCanvas\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 border:\cf5  \cf10 2px\cf5  \cf7 solid\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 6px\cf8 ;\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #4895ef\cf8 ;\cf5  \cb1 \
\cb3             \cf4 display:\cf5  \cf7 block\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin:\cf5  \cf10 5px\cf5  \cf7 auto\cf5  \cf10 0\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .controls\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 none\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 10px\cf8 ;\cf5  \cf11 /* Margen superior reducido */\cf5 \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 .messages\cf5  \cf8 \{\cf5 \cb1 \
\cb3              \cf4 display:\cf5  \cf7 none\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 10px\cf8 ;\cf5  \cf11 /* Margen superior reducido */\cf5 \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf2 button\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #D9534F\cf8 ;\cf5  \cb1 \
\cb3             \cf4 color:\cf5  \cf7 white\cf8 ;\cf5 \cb1 \
\cb3             \cf4 border:\cf5  \cf7 none\cf8 ;\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 10px\cf5  \cf10 20px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 10px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 cursor:\cf5  \cf7 pointer\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf4 transition:\cf5  \cf7 background-color\cf5  \cf10 0.3s\cf8 ,\cf5  \cf7 transform\cf5  \cf10 0.1s\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 4px\cf5  #C9302C\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin:\cf5  \cf10 5px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 letter-spacing:\cf5  \cf10 0.5px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 button:hover\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #C9302C\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 button:active\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 transform:\cf5  \cf7 translateY(\cf10 2px\cf7 )\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 2px\cf5  #AC2925\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 #pauseButton\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 background-color:\cf5  #ffc857\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 4px\cf5  #e0a82e\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 #pauseButton:hover\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #ffb732\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3          \cf2 #pauseButton:active\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 transform:\cf5  \cf7 translateY(\cf10 2px\cf7 )\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 2px\cf5  #e0a82e\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 #soundButton\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #5bc0de\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 4px\cf5  #31b0d5\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 #soundButton:hover\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #31b0d5\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 #soundButton:active\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 transform:\cf5  \cf7 translateY(\cf10 2px\cf7 )\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 2px\cf5  #31b0d5\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf2 #messageArea\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.1em\cf8 ;\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #ff6347\cf8 ;\cf5  \cb1 \
\cb3             \cf4 min-height:\cf5  \cf10 25px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 8px\cf8 ;\cf5  \cf11 /* Margen reducido */\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf2 #animalDisplayContainer\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 8px\cf8 ;\cf5  \cf11 /* Margen reducido */\cf5 \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 10px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf2 #animalImageElement\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 width:\cf5  \cf10 60px\cf8 ;\cf5   \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf4 height:\cf5  \cf10 60px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 object-fit:\cf5  \cf7 contain\cf8 ;\cf5  \cb1 \
\cb3             \cf4 background-color:\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 50%\cf8 ;\cf5  \cb1 \
\cb3             \cf4 display:\cf5  \cf7 block\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin:\cf5  \cf10 0\cf5  \cf7 auto\cf5  \cf10 5px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border:\cf5  \cf10 3px\cf5  \cf7 solid\cf5  #4895ef\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 0\cf5  \cf10 8px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.1\cf7 )\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-text-info-panel\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #004d40\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 5px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 8px\cf8 ;\cf5  \cf11 /* Margen reducido */\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         @\cf2 media\cf5  (\cf2 max-width:\cf5  768\cf2 px\cf5 ) \cf8 \{\cf5 \cb1 \
\cb3             body \{ \cf4 padding:\cf5  \cf10 10px\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 h1\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 3.5em\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 #playerInfoMenu\cf5  \cf8 \{\cf5  \cf4 padding:\cf5  \cf10 20px\cf8 ;\cf5  \cf4 max-width:\cf5  \cf10 90%\cf8 ;\}\cf5 \cb1 \
\cb3             \cf2 #playerInfoMenu\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1.4em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 .input-group\cf5  \cf2 input\cf5  \cf8 \{\cf4 font-size:\cf5  \cf10 0.9em\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 8px\cf8 ;\}\cf5 \cb1 \
\
\cb3             \cf2 #levelSelectionMenu\cf5  \cf8 \{\cf5  \cf4 max-width:\cf5  \cf10 95%\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 20px\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 #levelSelectionMenu\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1.5em\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 .level-grid\cf5  \cf8 \{\cf5  \cf4 grid-template-columns:\cf5  \cf7 repeat(auto-fit\cf8 ,\cf5  \cf7 minmax(\cf10 120px\cf8 ,\cf5  \cf10 1fr\cf7 ))\cf8 ;\cf5  \cf4 gap:\cf5  \cf10 15px\cf8 ;\}\cf5  \cf11 /* Ajustado para tablet */\cf5 \cb1 \
\cb3             \cf2 .level-item-container\cf5  \cf8 \{\cf5  \cf4 gap:\cf5  \cf10 5px\cf8 ;\}\cf5 \cb1 \
\cb3             \cf2 .level-card\cf5  \cf8 \{\cf5  \cf4 width:\cf5  \cf10 120px\cf8 ;\cf5  \cf4 height:\cf5  \cf10 120px\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 5px\cf8 ;\}\cf5  \cb1 \
\cb3             \cf2 .level-card-animal-image\cf5  \cf8 \{\cf5  \cf4 width:\cf5  \cf10 110px\cf8 ;\cf5  \cf4 height:\cf5  \cf10 110px\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 .level-number-display\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\
\cb3             \cf2 .game-container\cf5  \cf8 \{\cf5  \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5  \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 15px\cf8 ;\cf5  \cf4 gap:\cf5  \cf10 10px\cf8 ;\cf5  \cf8 \}\cf5  \cf11 /* Gap reducido */\cf5 \cb1 \
\cb3             \cf2 .info-panel\cf5  \cf8 \{\cf5  \cf4 min-width:\cf5  \cf10 90%\cf8 ;\cf5  \cf4 order:\cf5  \cf10 -1\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 10px\cf8 ;\cf5  \cf4 gap:\cf5  \cf10 5px\cf8 ;\cf5  \cf8 \}\cf5  \cf11 /* Gap reducido */\cf5 \cb1 \
\cb3             \cf2 .info-panel\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1.1em\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 5px\cf8 ;\cf5  \cf8 \}\cf5  \cf11 /* Tama\'f1o y padding reducidos */\cf5 \cb1 \
\cb3             \cf2 .info-panel\cf5  \cf2 p\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5  \cf4 margin:\cf5  \cf10 3px\cf5  \cf10 0\cf8 ;\cf5  \cf8 \}\cf5  \cf11 /* Tama\'f1o y margen reducidos */\cf5 \cb1 \
\cb3             \cf2 #gameCanvas\cf5  \cf8 \{\cf5  \cf4 max-width:\cf5  \cf10 100%\cf8 ;\cf5  \cf4 height:\cf5  \cf7 auto\cf8 ;\cf5   \cf8 \}\cf5 \cb1 \
\cb3             \cf2 button\cf5  \cf8 \{\cf5  \cf4 padding:\cf5  \cf10 10px\cf5  \cf10 18px\cf8 ;\cf5  \cf4 font-size:\cf5  \cf10 0.9em\cf8 ;\}\cf5  \cf11 /* Botones m\'e1s peque\'f1os */\cf5 \cb1 \
\cb3             \cf2 #messageArea\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5  \cf4 margin-top:\cf5  \cf10 5px\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 #animalImageElement\cf5  \cf8 \{\cf5  \cf4 width:\cf5  \cf10 50px\cf8 ;\cf5  \cf4 height:\cf5  \cf10 50px\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 .level-text-info-panel\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 0.9em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3         \}\cb1 \
\cb3          @\cf2 media\cf5  (\cf2 max-width:\cf5  480\cf2 px\cf5 ) \cf8 \{\cf5  \cb1 \
\cb3             h1 \{ \cf4 font-size:\cf5  \cf10 2.5em\cf8 ;\cf5  \cf4 margin-bottom:\cf5  \cf10 5px\cf8 ;\}\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf2 #companyLogo\cf5  \cf8 \{\cf5  \cf4 max-width:\cf5  \cf10 90px\cf8 ;\cf5  \cf4 max-height:\cf5  \cf10 45px\cf8 ;\cf5  \cf4 margin-bottom:\cf5  \cf10 10px\cf8 ;\}\cf5  \cb1 \
\cb3             \cf2 #playerInfoMenu\cf5  \cf8 \{\cf5  \cf4 padding:\cf5  \cf10 10px\cf8 ;\}\cf5 \cb1 \
\cb3             \cf2 #playerInfoMenu\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1.2em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\
\cb3             \cf2 #levelSelectionMenu\cf5  \cf8 \{\cf5  \cf4 padding:\cf5  \cf10 10px\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 #levelSelectionMenu\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1.2em\cf8 ;\cf5  \cf4 margin-bottom:\cf5  \cf10 10px\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 .level-grid\cf5  \cf8 \{\cf5  \cf4 grid-template-columns:\cf5  \cf7 repeat(\cf10 2\cf8 ,\cf5  \cf10 1fr\cf7 )\cf8 ;\cf5  \cf4 gap:\cf5  \cf10 10px\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 .level-item-container\cf5  \cf8 \{\cf5  \cf4 gap:\cf5  \cf10 4px\cf8 ;\}\cf5 \cb1 \
\cb3             \cf2 .level-card\cf5  \cf8 \{\cf5  \cf4 width:\cf5  \cf10 100px\cf8 ;\cf5  \cf4 height:\cf5  \cf10 100px\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 4px\cf8 ;\}\cf5  \cb1 \
\cb3             \cf2 .level-card-animal-image\cf5  \cf8 \{\cf5  \cf4 width:\cf5  \cf10 90px\cf8 ;\cf5  \cf4 height:\cf5  \cf10 90px\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 .level-number-display\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 0.9em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 .info-panel\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 .info-panel\cf5  \cf2 p\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 0.9em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 #animalImageElement\cf5  \cf8 \{\cf5  \cf4 width:\cf5  \cf10 45px\cf8 ;\cf5  \cf4 height:\cf5  \cf10 45px\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 .level-text-info-panel\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 0.8em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3         \}\cb1 \
\cb3     \cf6 </\cf2 style\cf6 >\cf5 \cb1 \
\cf6 \cb3 </\cf2 head\cf6 >\cf5 \cb1 \
\cf6 \cb3 <\cf2 body\cf6 >\cf5 \cb1 \
\cb3     \cf6 <\cf2 h1\cf6 >\cf5 TETRIS\cf6 </\cf2 h1\cf6 >\cf5  \cb1 \
\cb3     \cf6 <\cf2 img\cf5  \cf4 id\cf6 =\cf7 "companyLogo"\cf5  \cf4 src\cf6 =\cf7 "logo_Comunicai.png"\cf5  \cf4 alt\cf6 =\cf7 "Logo de la Empresa"\cf6 >\cf5  \cb1 \
\
\cb3     \cf6 <\cf2 div\cf5  \cf4 id\cf6 =\cf7 "playerInfoMenu"\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 h2\cf6 >\cf5 Informaci\'f3n del Jugador\cf6 </\cf2 h2\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "input-group"\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 label\cf5  \cf4 for\cf6 =\cf7 "playerNameInput"\cf6 >\cf5 Nombre:\cf6 </\cf2 label\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 input\cf5  \cf4 type\cf6 =\cf7 "text"\cf5  \cf4 id\cf6 =\cf7 "playerNameInput"\cf5  \cf4 placeholder\cf6 =\cf7 "Escribe tu nombre"\cf6 >\cf5 \cb1 \
\cb3         \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "input-group"\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 label\cf5  \cf4 for\cf6 =\cf7 "playerAgeInput"\cf6 >\cf5 Edad:\cf6 </\cf2 label\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 input\cf5  \cf4 type\cf6 =\cf7 "number"\cf5  \cf4 id\cf6 =\cf7 "playerAgeInput"\cf5  \cf4 placeholder\cf6 =\cf7 "Escribe tu edad"\cf6 >\cf5 \cb1 \
\cb3         \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 button\cf5  \cf4 id\cf6 =\cf7 "continueToLevelSelectButton"\cf6 >\cf5 Continuar\cf6 </\cf2 button\cf6 >\cf5 \cb1 \
\cb3     \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\
\
\cb3     \cf6 <\cf2 div\cf5  \cf4 id\cf6 =\cf7 "levelSelectionMenu"\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 h2\cf6 >\cf5 Elige un Nivel\cf6 </\cf2 h2\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "level-grid"\cf5  \cf4 id\cf6 =\cf7 "levelGridContainer"\cf6 >\cf5 \cb1 \
\cb3             \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\cb3     \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\
\cb3     \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "game-container"\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 canvas\cf5  \cf4 id\cf6 =\cf7 "gameCanvas"\cf6 ></\cf2 canvas\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "info-panel"\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 h2\cf6 >\cf5 Info del Juego\cf6 </\cf2 h2\cf6 >\cf5  \cf6 <\cf2 p\cf6 >\cf5 Puntuaci\'f3n: \cf6 <\cf2 span\cf5  \cf4 id\cf6 =\cf7 "score"\cf6 >\cf5 0\cf6 </\cf2 span\cf6 ></\cf2 p\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 p\cf6 >\cf5 Nivel: \cf6 <\cf2 span\cf5  \cf4 id\cf6 =\cf7 "level"\cf6 >\cf5 1\cf6 </\cf2 span\cf6 ></\cf2 p\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 p\cf6 >\cf5 L\'edneas: \cf6 <\cf2 span\cf5  \cf4 id\cf6 =\cf7 "lines"\cf6 >\cf5 0\cf6 </\cf2 span\cf6 ></\cf2 p\cf6 >\cf5 \cb1 \
\cb3             \cb1 \
\cb3             \cf6 <\cf2 div\cf5  \cf4 id\cf6 =\cf7 "animalDisplayContainer"\cf6 >\cf5 \cb1 \
\cb3                 \cf6 <\cf2 img\cf5  \cf4 id\cf6 =\cf7 "animalImageElement"\cf5  \cf4 src\cf6 =\cf7 "imagenes/conejo.png"\cf5  \cf4 alt\cf6 =\cf7 "Animal del Nivel"\cf6 >\cf5  \cb1 \
\cb3             \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 p\cf5  \cf4 id\cf6 =\cf7 "levelTextUnderAnimal"\cf5  \cf4 class\cf6 =\cf7 "level-text-info-panel"\cf6 >\cf5 Nivel 1\cf6 </\cf2 p\cf6 >\cf5 \cb1 \
\cb3             \cb1 \
\cb3             \cf6 <\cf2 h2\cf6 >\cf5 Pr\'f3xima Pieza\cf6 </\cf2 h2\cf6 >\cf5  \cf6 <\cf2 canvas\cf5  \cf4 id\cf6 =\cf7 "nextPieceCanvas"\cf6 ></\cf2 canvas\cf6 >\cf5 \cb1 \
\cb3         \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\cb3     \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\
\cb3     \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "controls"\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 button\cf5  \cf4 id\cf6 =\cf7 "mainActionButton"\cf6 >\cf5 Volver al Men\'fa\cf6 </\cf2 button\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 button\cf5  \cf4 id\cf6 =\cf7 "pauseButton"\cf6 >\cf5 Pausar\cf6 </\cf2 button\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 button\cf5  \cf4 id\cf6 =\cf7 "soundButton"\cf6 >\cf5 Sonido On\cf6 </\cf2 button\cf6 >\cf5  \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\
\cb3     \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "messages"\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 p\cf5  \cf4 id\cf6 =\cf7 "messageArea"\cf6 >\cf5 Ingresa tus datos para comenzar\cf6 </\cf2 p\cf6 >\cf5 \cb1 \
\cb3     \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\
\cb3     \cf6 <\cf2 script\cf6 >\cf5 \cb1 \
\cb3         \cf11 // --- Variables y Constantes del Juego ---\cf5 \cb1 \
\cb3         \cf12 const\cf5  canvas \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'gameCanvas'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  context \cf8 =\cf5  canvas\cf8 .\cf5 getContext\cf8 (\cf9 '2d'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  nextPieceCanvas \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'nextPieceCanvas'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  nextPieceContext \cf8 =\cf5  nextPieceCanvas\cf8 .\cf5 getContext\cf8 (\cf9 '2d'\cf8 );\cf5 \cb1 \
\
\cb3         \cf12 const\cf5  scoreDisplay \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'score'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  levelDisplay \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'level'\cf8 );\cf5  \cb1 \
\cb3         \cf12 const\cf5  linesDisplay \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'lines'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  messageArea \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'messageArea'\cf8 );\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf12 const\cf5  mainActionButton \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'mainActionButton'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  pauseButton \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'pauseButton'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  soundButton \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'soundButton'\cf8 );\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf12 const\cf5  animalImageElement \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'animalImageElement'\cf8 );\cf5  \cb1 \
\cb3         \cf12 const\cf5  levelTextUnderAnimal \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'levelTextUnderAnimal'\cf8 );\cf5  \cb1 \
\
\cb3         \cf12 const\cf5  playerInfoMenu \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'playerInfoMenu'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  playerNameInput \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'playerNameInput'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  playerAgeInput \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'playerAgeInput'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  continueToLevelSelectButton \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'continueToLevelSelectButton'\cf8 );\cf5 \cb1 \
\
\cb3         \cf12 const\cf5  levelSelectionMenu \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'levelSelectionMenu'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  levelGridContainer \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'levelGridContainer'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  gameContainer \cf8 =\cf5  document\cf8 .\cf5 querySelector\cf8 (\cf9 '.game-container'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  controlsDiv \cf8 =\cf5  document\cf8 .\cf5 querySelector\cf8 (\cf9 '.controls'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  messagesDiv \cf8 =\cf5  document\cf8 .\cf5 querySelector\cf8 (\cf9 '.messages'\cf8 );\cf5 \cb1 \
\
\cb3         \cf12 const\cf5  \cf13 COLS\cf5  \cf8 =\cf5  \cf14 10\cf8 ;\cf5  \cb1 \
\cb3         \cf12 const\cf5  \cf13 ROWS\cf5  \cf8 =\cf5  \cf14 20\cf8 ;\cf5  \cb1 \
\cb3         \cf12 const\cf5  \cf13 BLOCK_SIZE\cf5  \cf8 =\cf5  \cf14 24\cf8 ;\cf5  \cb1 \
\cb3         \cf12 const\cf5  \cf13 NEXT_PIECE_COLS\cf5  \cf8 =\cf5  \cf14 4\cf8 ;\cf5 \cb1 \
\cb3         \cf12 const\cf5  \cf13 NEXT_PIECE_ROWS\cf5  \cf8 =\cf5  \cf14 4\cf8 ;\cf5 \cb1 \
\cb3         \cf12 const\cf5  \cf13 NEXT_PIECE_BLOCK_SIZE\cf5  \cf8 =\cf5  \cf14 15\cf8 ;\cf5  \cb1 \
\cb3         \cf12 const\cf5  \cf13 LINES_PER_LEVEL\cf5  \cf8 =\cf5  \cf14 10\cf8 ;\cf5  \cb1 \
\
\cb3         \cf12 let\cf5  playerName \cf8 =\cf5  \cf9 ""\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  playerAge \cf8 =\cf5  \cf9 ""\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  soundEnabled \cf8 =\cf5  \cf12 true\cf8 ;\cf5 \cb1 \
\
\cb3         \cf11 // --- Inicializaci\'f3n de Sonidos con Tone.js ---\cf5 \cb1 \
\cb3         \cf12 let\cf5  moveSound\cf8 ,\cf5  rotateSound\cf8 ,\cf5  landSound\cf8 ,\cf5  lineClearSound\cf8 ,\cf5  levelUpSound\cf8 ,\cf5  gameOverSound\cf8 ;\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  setupSounds\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf12 typeof\cf5  \cf13 Tone\cf5  \cf8 !==\cf5  \cf9 'undefined'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 moveSound \cf8 =\cf5  \cf12 new\cf5  \cf13 Tone\cf8 .\cf13 Synth\cf8 (\{\cf5 \cb1 \
\cb3                     oscillator\cf8 :\cf5  \cf8 \{\cf5  type\cf8 :\cf5  \cf9 'sine'\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     envelope\cf8 :\cf5  \cf8 \{\cf5  attack\cf8 :\cf5  \cf14 0.005\cf8 ,\cf5  decay\cf8 :\cf5  \cf14 0.1\cf8 ,\cf5  sustain\cf8 :\cf5  \cf14 0\cf8 ,\cf5  release\cf8 :\cf5  \cf14 0.1\cf5  \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \}).\cf5 toDestination\cf8 ();\cf5 \cb1 \
\cb3                 rotateSound \cf8 =\cf5  \cf12 new\cf5  \cf13 Tone\cf8 .\cf13 Synth\cf8 (\{\cf5 \cb1 \
\cb3                     oscillator\cf8 :\cf5  \cf8 \{\cf5  type\cf8 :\cf5  \cf9 'triangle'\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     envelope\cf8 :\cf5  \cf8 \{\cf5  attack\cf8 :\cf5  \cf14 0.005\cf8 ,\cf5  decay\cf8 :\cf5  \cf14 0.05\cf8 ,\cf5  sustain\cf8 :\cf5  \cf14 0\cf8 ,\cf5  release\cf8 :\cf5  \cf14 0.1\cf5  \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \}).\cf5 toDestination\cf8 ();\cf5 \cb1 \
\cb3                 landSound \cf8 =\cf5  \cf12 new\cf5  \cf13 Tone\cf8 .\cf13 Synth\cf8 (\{\cf5 \cb1 \
\cb3                     oscillator\cf8 :\cf5  \cf8 \{\cf5  type\cf8 :\cf5  \cf9 'square'\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     envelope\cf8 :\cf5  \cf8 \{\cf5  attack\cf8 :\cf5  \cf14 0.01\cf8 ,\cf5  decay\cf8 :\cf5  \cf14 0.1\cf8 ,\cf5  sustain\cf8 :\cf5  \cf14 0.05\cf8 ,\cf5  release\cf8 :\cf5  \cf14 0.1\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     volume\cf8 :\cf5  \cf8 -\cf14 10\cf5  \cb1 \
\cb3                 \cf8 \}).\cf5 toDestination\cf8 ();\cf5 \cb1 \
\cb3                 lineClearSound \cf8 =\cf5  \cf12 new\cf5  \cf13 Tone\cf8 .\cf13 PolySynth\cf8 (\cf13 Tone\cf8 .\cf13 Synth\cf8 ,\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     oscillator\cf8 :\cf5  \cf8 \{\cf5  type\cf8 :\cf5  \cf9 'sawtooth'\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     envelope\cf8 :\cf5  \cf8 \{\cf5  attack\cf8 :\cf5  \cf14 0.01\cf8 ,\cf5  decay\cf8 :\cf5  \cf14 0.2\cf8 ,\cf5  sustain\cf8 :\cf5  \cf14 0.1\cf8 ,\cf5  release\cf8 :\cf5  \cf14 0.2\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     volume\cf8 :\cf5  \cf8 -\cf14 5\cf5 \cb1 \
\cb3                 \cf8 \}).\cf5 toDestination\cf8 ();\cf5 \cb1 \
\cb3                 levelUpSound \cf8 =\cf5  \cf12 new\cf5  \cf13 Tone\cf8 .\cf13 PolySynth\cf8 (\cf13 Tone\cf8 .\cf13 Synth\cf8 ,\cf5  \cf8 \{\cf5 \cb1 \
\cb3                      envelope\cf8 :\cf5  \cf8 \{\cf5  attack\cf8 :\cf5  \cf14 0.01\cf8 ,\cf5  decay\cf8 :\cf5  \cf14 0.4\cf8 ,\cf5  sustain\cf8 :\cf5  \cf14 0\cf8 ,\cf5  release\cf8 :\cf5  \cf14 0.4\cf5  \cf8 \},\cf5 \cb1 \
\cb3                      volume\cf8 :\cf5  \cf8 -\cf14 3\cf5 \cb1 \
\cb3                 \cf8 \}).\cf5 toDestination\cf8 ();\cf5 \cb1 \
\cb3                 gameOverSound \cf8 =\cf5  \cf12 new\cf5  \cf13 Tone\cf8 .\cf13 Synth\cf8 (\{\cf5 \cb1 \
\cb3                     oscillator\cf8 :\cf5  \cf8 \{\cf5  type\cf8 :\cf5  \cf9 'fatsawtooth'\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     envelope\cf8 :\cf5  \cf8 \{\cf5  attack\cf8 :\cf5  \cf14 0.01\cf8 ,\cf5  decay\cf8 :\cf5  \cf14 0.5\cf8 ,\cf5  sustain\cf8 :\cf5  \cf14 0\cf8 ,\cf5  release\cf8 :\cf5  \cf14 0.5\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     volume\cf8 :\cf5  \cf8 -\cf14 5\cf5 \cb1 \
\cb3                 \cf8 \}).\cf5 toDestination\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 console\cf8 .\cf5 warn\cf8 (\cf9 "Tone.js no est\'e1 cargado. Los sonidos no funcionar\'e1n."\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         setupSounds\cf8 ();\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  playSound\cf8 (\cf5 sound\cf8 ,\cf5  note\cf8 ,\cf5  duration \cf8 =\cf5  \cf9 '8n'\cf8 ,\cf5  time \cf8 =\cf5  \cf13 Tone\cf8 .\cf5 now\cf8 ())\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 soundEnabled \cf8 &&\cf5  sound \cf8 &&\cf5  \cf12 typeof\cf5  sound\cf8 .\cf5 triggerAttackRelease \cf8 ===\cf5  \cf9 'function'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 sound\cf8 .\cf5 triggerAttackRelease\cf8 (\cf5 note\cf8 ,\cf5  duration\cf8 ,\cf5  time\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf12 function\cf5  playPolySound\cf8 (\cf5 sound\cf8 ,\cf5  notes\cf8 ,\cf5  duration \cf8 =\cf5  \cf9 '8n'\cf8 ,\cf5  time \cf8 =\cf5  \cf13 Tone\cf8 .\cf5 now\cf8 ())\{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 soundEnabled \cf8 &&\cf5  sound \cf8 &&\cf5  \cf12 typeof\cf5  sound\cf8 .\cf5 triggerAttackRelease \cf8 ===\cf5  \cf9 'function'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 sound\cf8 .\cf5 triggerAttackRelease\cf8 (\cf5 notes\cf8 ,\cf5  duration\cf8 ,\cf5  time\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf12 if\cf5  \cf8 (\cf5 canvas \cf8 &&\cf5  nextPieceCanvas\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             canvas\cf8 .\cf5 width \cf8 =\cf5  \cf13 COLS\cf5  \cf8 *\cf5  \cf13 BLOCK_SIZE\cf8 ;\cf5 \cb1 \
\cb3             canvas\cf8 .\cf5 height \cf8 =\cf5  \cf13 ROWS\cf5  \cf8 *\cf5  \cf13 BLOCK_SIZE\cf8 ;\cf5 \cb1 \
\cb3             nextPieceCanvas\cf8 .\cf5 width \cf8 =\cf5  \cf13 NEXT_PIECE_COLS\cf5  \cf8 *\cf5  \cf13 NEXT_PIECE_BLOCK_SIZE\cf8 ;\cf5 \cb1 \
\cb3             nextPieceCanvas\cf8 .\cf5 height \cf8 =\cf5  \cf13 NEXT_PIECE_ROWS\cf5  \cf8 *\cf5  \cf13 NEXT_PIECE_BLOCK_SIZE\cf8 ;\cf5 \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 context \cf8 &&\cf5  nextPieceContext\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 context\cf8 .\cf5 scale\cf8 (\cf13 BLOCK_SIZE\cf8 ,\cf5  \cf13 BLOCK_SIZE\cf8 );\cf5 \cb1 \
\cb3                 nextPieceContext\cf8 .\cf5 scale\cf8 (\cf13 NEXT_PIECE_BLOCK_SIZE\cf8 ,\cf5  \cf13 NEXT_PIECE_BLOCK_SIZE\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 console\cf8 .\cf5 error\cf8 (\cf9 "Error al obtener el contexto 2D de uno de los canvas."\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3             console\cf8 .\cf5 error\cf8 (\cf9 "Error: No se encontraron los elementos canvas del juego."\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf12 let\cf5  board \cf8 =\cf5  createBoard\cf8 (\cf13 COLS\cf8 ,\cf5  \cf13 ROWS\cf8 );\cf5 \cb1 \
\cb3         \cf12 let\cf5  currentPiece\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  nextPiece\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  score \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  level \cf8 =\cf5  \cf14 1\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  linesCleared \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  gameOver \cf8 =\cf5  \cf12 false\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  isPaused \cf8 =\cf5  \cf12 false\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  gameStarted \cf8 =\cf5  \cf12 false\cf8 ;\cf5 \cb1 \
\
\cb3         \cf12 let\cf5  dropCounter \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  dropInterval \cf8 =\cf5  \cf14 1000\cf8 ;\cf5  \cb1 \
\cb3         \cf12 let\cf5  animationFrameId\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  lastTime \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\
\cb3         \cf12 const\cf5  pieceBag \cf8 =\cf5  \cf8 [];\cf5  \cb1 \
\
\cb3         \cf12 const\cf5  \cf13 TETROMINOES\cf5  \cf8 =\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf9 'I'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#54C6EB'\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf9 'L'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 0\cf8 ,\cf5  \cf14 0\cf8 ,\cf5  \cf14 1\cf8 ],\cf5  \cf8 [\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#FFA500'\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf9 'J'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 1\cf8 ,\cf5  \cf14 0\cf8 ,\cf5  \cf14 0\cf8 ],\cf5  \cf8 [\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#4169E1'\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf9 'T'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 0\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 0\cf8 ],\cf5  \cf8 [\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#BB86FC'\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf9 'O'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ],\cf5  \cf8 [\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#FFDA63'\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf9 'S'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 0\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ],\cf5  \cf8 [\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 0\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#90EE90'\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf9 'Z'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 0\cf8 ],\cf5  \cf8 [\cf14 0\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#FF7F50'\cf5  \cf8 \}\cf5   \cb1 \
\cb3         \cf8 \};\cf5 \cb1 \
\cb3         \cf12 const\cf5  \cf13 PIECE_KEYS\cf5  \cf8 =\cf5  \cf13 Object\cf8 .\cf5 keys\cf8 (\cf13 TETROMINOES\cf8 );\cf5 \cb1 \
\
\cb3         \cf12 const\cf5  \cf13 ANIMALS\cf5  \cf8 =\cf5  \cf8 [\cf5 \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Conejo"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/conejo.png"\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Ardilla"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/ardilla.png"\cf5  \cf8 \},\cf5 \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Perezoso"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/perezoso.png"\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Perro"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/perro.png"\cf5  \cf8 \},\cf5 \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Mono"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/mono.png"\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Lobo"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/lobo.png"\cf5  \cf8 \},\cf5 \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Serpiente"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/serpiente.png"\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Tigre"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/tigre.png"\cf5  \cf8 \},\cf5 \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Hipop\'f3tamo"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/hipopotamo.png"\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Rinoceronte"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/rinoceronte.png"\cf5  \cf8 \},\cf5 \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Elefante"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/elefante.png"\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Le\'f3n"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/leon.png"\cf5  \cf8 \}\cf5 \cb1 \
\cb3         \cf8 ];\cf5 \cb1 \
\
\cb3         \cf11 // --- Funciones de Interfaz y Estado del Juego ---\cf5 \cb1 \
\cb3         \cf12 function\cf5  showPlayerInfoMenu\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 playerInfoMenu\cf8 )\cf5  playerInfoMenu\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'flex'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 levelSelectionMenu\cf8 )\cf5  levelSelectionMenu\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 gameContainer\cf8 )\cf5  gameContainer\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 controlsDiv\cf8 )\cf5  controlsDiv\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 messagesDiv\cf8 )\cf5  messagesDiv\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'block'\cf8 ;\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Ingresa tus datos para comenzar"\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf12 function\cf5  showLevelSelectionMenu\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 playerInfoMenu\cf8 )\cf5  playerInfoMenu\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 levelSelectionMenu\cf8 )\cf5  levelSelectionMenu\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'flex'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 gameContainer\cf8 )\cf5  gameContainer\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 controlsDiv\cf8 )\cf5  controlsDiv\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 messagesDiv\cf8 )\cf5  messagesDiv\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'block'\cf8 ;\cf5   \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "\'a1Elige un nivel para comenzar!"\cf8 ;\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 mainActionButton\cf8 )\cf5  mainActionButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Volver al Men\'fa"\cf8 ;\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 pauseButton\cf8 )\cf5  pauseButton\cf8 .\cf5 disabled \cf8 =\cf5  \cf12 true\cf8 ;\cf5 \cb1 \
\cb3             \cb1 \
\cb3             gameStarted \cf8 =\cf5  \cf12 false\cf8 ;\cf5 \cb1 \
\cb3             gameOver \cf8 =\cf5  \cf12 true\cf8 ;\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 animationFrameId\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 cancelAnimationFrame\cf8 (\cf5 animationFrameId\cf8 );\cf5 \cb1 \
\cb3                 animationFrameId \cf8 =\cf5  \cf12 null\cf8 ;\cf5  \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             populateLevelSelectionMenu\cf8 ();\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  populateLevelSelectionMenu\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 levelGridContainer\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 console\cf8 .\cf5 error\cf8 (\cf9 "Error: El contenedor de la cuadr\'edcula de niveles no se encontr\'f3."\cf8 );\cf5 \cb1 \
\cb3                 \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             levelGridContainer\cf8 .\cf5 innerHTML \cf8 =\cf5  \cf9 ''\cf8 ;\cf5  \cb1 \
\cb3             \cf13 ANIMALS\cf8 .\cf5 forEach\cf8 ((\cf5 animal\cf8 ,\cf5  index\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 const\cf5  itemContainer \cf8 =\cf5  document\cf8 .\cf5 createElement\cf8 (\cf9 'div'\cf8 );\cf5 \cb1 \
\cb3                 itemContainer\cf8 .\cf5 classList\cf8 .\cf5 add\cf8 (\cf9 'level-item-container'\cf8 );\cf5 \cb1 \
\
\cb3                 \cf12 const\cf5  card \cf8 =\cf5  document\cf8 .\cf5 createElement\cf8 (\cf9 'div'\cf8 );\cf5 \cb1 \
\cb3                 card\cf8 .\cf5 classList\cf8 .\cf5 add\cf8 (\cf9 'level-card'\cf8 );\cf5 \cb1 \
\cb3                 card\cf8 .\cf5 dataset\cf8 .\cf5 level \cf8 =\cf5  index \cf8 +\cf5  \cf14 1\cf8 ;\cf5  \cb1 \
\
\cb3                 \cf12 const\cf5  img \cf8 =\cf5  document\cf8 .\cf5 createElement\cf8 (\cf9 'img'\cf8 );\cf5 \cb1 \
\cb3                 img\cf8 .\cf5 src \cf8 =\cf5  animal\cf8 .\cf5 imageName\cf8 ;\cf5  \cb1 \
\cb3                 img\cf8 .\cf5 alt \cf8 =\cf5  animal\cf8 .\cf5 name\cf8 ;\cf5  \cb1 \
\cb3                 img\cf8 .\cf5 classList\cf8 .\cf5 add\cf8 (\cf9 'level-card-animal-image'\cf8 );\cf5  \cb1 \
\cb3                 card\cf8 .\cf5 appendChild\cf8 (\cf5 img\cf8 );\cf5  \cb1 \
\
\cb3                 \cf12 const\cf5  numberDisplay \cf8 =\cf5  document\cf8 .\cf5 createElement\cf8 (\cf9 'div'\cf8 );\cf5 \cb1 \
\cb3                 numberDisplay\cf8 .\cf5 classList\cf8 .\cf5 add\cf8 (\cf9 'level-number-display'\cf8 );\cf5 \cb1 \
\cb3                 numberDisplay\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 `Nivel \cf8 $\{\cf5 index \cf8 +\cf5  \cf14 1\cf8 \}\cf9 `\cf8 ;\cf5 \cb1 \
\
\cb3                 itemContainer\cf8 .\cf5 appendChild\cf8 (\cf5 card\cf8 );\cf5 \cb1 \
\cb3                 itemContainer\cf8 .\cf5 appendChild\cf8 (\cf5 numberDisplay\cf8 );\cf5 \cb1 \
\
\cb3                 card\cf8 .\cf5 addEventListener\cf8 (\cf9 'click'\cf8 ,\cf5  \cf8 ()\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf11 // console.log("Tarjeta de nivel clickeada. Nivel:", card.dataset.level); \cf5 \cb1 \
\cb3                     \cf12 const\cf5  selectedLevel \cf8 =\cf5  parseInt\cf8 (\cf5 card\cf8 .\cf5 dataset\cf8 .\cf5 level\cf8 );\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 isNaN\cf8 (\cf5 selectedLevel\cf8 ))\cf5  \cf8 \{\cf5 \cb1 \
\cb3                         console\cf8 .\cf5 error\cf8 (\cf9 "Error: Nivel seleccionado no es un n\'famero."\cf8 ,\cf5  card\cf8 .\cf5 dataset\cf8 .\cf5 level\cf8 );\cf5 \cb1 \
\cb3                         \cf12 return\cf8 ;\cf5 \cb1 \
\cb3                     \cf8 \}\cf5 \cb1 \
\cb3                     level \cf8 =\cf5  selectedLevel\cf8 ;\cf5 \cb1 \
\cb3                     linesCleared \cf8 =\cf5  \cf8 (\cf5 selectedLevel \cf8 -\cf5  \cf14 1\cf8 )\cf5  \cf8 *\cf5  \cf13 LINES_PER_LEVEL\cf8 ;\cf5  \cb1 \
\cb3                     \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 levelSelectionMenu\cf8 )\cf5  levelSelectionMenu\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 gameContainer\cf8 )\cf5  gameContainer\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'flex'\cf8 ;\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 controlsDiv\cf8 )\cf5  controlsDiv\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'flex'\cf8 ;\cf5  \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 messagesDiv\cf8 )\cf5  messagesDiv\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'block'\cf8 ;\cf5  \cb1 \
\
\cb3                     startGame\cf8 ();\cf5 \cb1 \
\cb3                 \cf8 \});\cf5 \cb1 \
\cb3                 levelGridContainer\cf8 .\cf5 appendChild\cf8 (\cf5 itemContainer\cf8 );\cf5  \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  startGame\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf11 // console.log("Iniciando startGame(). Nivel seleccionado:", level); \cf5 \cb1 \
\cb3             board \cf8 =\cf5  createBoard\cf8 (\cf13 COLS\cf8 ,\cf5  \cf13 ROWS\cf8 );\cf5 \cb1 \
\cb3             score \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3             isPaused \cf8 =\cf5  \cf12 false\cf8 ;\cf5 \cb1 \
\cb3             pieceBag\cf8 .\cf5 length \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3             \cb1 \
\cb3             gameOver \cf8 =\cf5  \cf12 false\cf8 ;\cf5  \cb1 \
\cb3             \cb1 \
\cb3             updateScore\cf8 (\cf14 0\cf8 );\cf5 \cb1 \
\cb3             updateLevel\cf8 ();\cf5     \cb1 \
\cb3             resetPiece\cf8 ();\cf5      \cb1 \
\
\cb3             draw\cf8 ();\cf5            \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 gameOver\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 gameStarted \cf8 =\cf5  \cf12 false\cf8 ;\cf5  \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "\'a1Juego Terminado! Puntuaci\'f3n: "\cf5  \cf8 +\cf5  score\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 mainActionButton\cf8 )\cf5  mainActionButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Elegir Nivel"\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 pauseButton\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     pauseButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Pausar"\cf8 ;\cf5 \cb1 \
\cb3                     pauseButton\cf8 .\cf5 disabled \cf8 =\cf5  \cf12 true\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3                 playSound\cf8 (\cf5 gameOverSound\cf8 ,\cf5  \cf9 'C3'\cf8 ,\cf5  \cf9 '1n'\cf8 );\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 animationFrameId\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                     cancelAnimationFrame\cf8 (\cf5 animationFrameId\cf8 );\cf5 \cb1 \
\cb3                     animationFrameId \cf8 =\cf5  \cf12 null\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 gameStarted \cf8 =\cf5  \cf12 true\cf8 ;\cf5  \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 ""\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 mainActionButton\cf8 )\cf5  mainActionButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Volver al Men\'fa"\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 pauseButton\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     pauseButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Pausar"\cf8 ;\cf5 \cb1 \
\cb3                     pauseButton\cf8 .\cf5 disabled \cf8 =\cf5  \cf12 false\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 animationFrameId\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                     cancelAnimationFrame\cf8 (\cf5 animationFrameId\cf8 );\cf5 \cb1 \
\cb3                     animationFrameId \cf8 =\cf5  \cf12 null\cf8 ;\cf5  \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3                 lastTime \cf8 =\cf5  performance\cf8 .\cf5 now\cf8 ();\cf5 \cb1 \
\cb3                 dropCounter \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3                 animationFrameId \cf8 =\cf5  requestAnimationFrame\cf8 (\cf5 gameLoop\cf8 );\cf5 \cb1 \
\cb3                 \cf11 // console.log("Nuevo gameLoop solicitado. ID:", animationFrameId); \cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf11 // --- Funciones del Juego (L\'f3gica de Tetris) ---\cf5 \cb1 \
\cb3         \cf12 function\cf5  createBoard\cf8 (\cf5 cols\cf8 ,\cf5  rows\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 const\cf5  matrix \cf8 =\cf5  \cf8 [];\cf5 \cb1 \
\cb3             \cf12 while\cf5  \cf8 (\cf5 rows\cf8 --)\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 matrix\cf8 .\cf5 push\cf8 (\cf12 new\cf5  \cf13 Array\cf8 (\cf5 cols\cf8 ).\cf5 fill\cf8 (\cf14 0\cf8 ));\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             \cf12 return\cf5  matrix\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  drawBoard\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 context\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             board\cf8 .\cf5 forEach\cf8 ((\cf5 row\cf8 ,\cf5  y\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 row\cf8 .\cf5 forEach\cf8 ((\cf5 value\cf8 ,\cf5  x\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 value \cf8 !==\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                         context\cf8 .\cf5 fillStyle \cf8 =\cf5  value\cf8 ;\cf5  \cb1 \
\cb3                         context\cf8 .\cf5 fillRect\cf8 (\cf5 x\cf8 ,\cf5  y\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 );\cf5 \cb1 \
\cb3                         context\cf8 .\cf5 strokeStyle \cf8 =\cf5  \cf9 'rgba(0, 0, 0, 0.15)'\cf8 ;\cf5  \cb1 \
\cb3                         context\cf8 .\cf5 lineWidth \cf8 =\cf5  \cf14 0.08\cf8 ;\cf5 \cb1 \
\cb3                         context\cf8 .\cf5 strokeRect\cf8 (\cf5 x\cf8 ,\cf5  y\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 );\cf5 \cb1 \
\cb3                     \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \});\cf5 \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  drawMatrix\cf8 (\cf5 matrix\cf8 ,\cf5  offset\cf8 ,\cf5  ctxToUse\cf8 ,\cf5  pieceColor\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 ctxToUse\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             matrix\cf8 .\cf5 forEach\cf8 ((\cf5 row\cf8 ,\cf5  y\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 row\cf8 .\cf5 forEach\cf8 ((\cf5 value\cf8 ,\cf5  x\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 value \cf8 !==\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                         ctxToUse\cf8 .\cf5 fillStyle \cf8 =\cf5  pieceColor\cf8 ;\cf5 \cb1 \
\cb3                         ctxToUse\cf8 .\cf5 fillRect\cf8 (\cf5 x \cf8 +\cf5  offset\cf8 .\cf5 x\cf8 ,\cf5  y \cf8 +\cf5  offset\cf8 .\cf5 y\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 );\cf5 \cb1 \
\cb3                         ctxToUse\cf8 .\cf5 strokeStyle \cf8 =\cf5  \cf9 'rgba(255, 255, 255, 0.4)'\cf8 ;\cf5  \cb1 \
\cb3                         ctxToUse\cf8 .\cf5 lineWidth \cf8 =\cf5  \cf14 0.12\cf8 ;\cf5 \cb1 \
\cb3                         ctxToUse\cf8 .\cf5 strokeRect\cf8 (\cf5 x \cf8 +\cf5  offset\cf8 .\cf5 x\cf8 ,\cf5  y \cf8 +\cf5  offset\cf8 .\cf5 y\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 );\cf5 \cb1 \
\cb3                     \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \});\cf5 \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf12 function\cf5  refillBag\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 const\cf5  tempBag \cf8 =\cf5  \cf8 [...\cf13 PIECE_KEYS\cf8 ];\cf5 \cb1 \
\cb3             \cf12 while\cf5  \cf8 (\cf5 tempBag\cf8 .\cf5 length\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 const\cf5  randomIndex \cf8 =\cf5  \cf13 Math\cf8 .\cf5 floor\cf8 (\cf13 Math\cf8 .\cf5 random\cf8 ()\cf5  \cf8 *\cf5  tempBag\cf8 .\cf5 length\cf8 );\cf5 \cb1 \
\cb3                 pieceBag\cf8 .\cf5 push\cf8 (\cf5 tempBag\cf8 .\cf5 splice\cf8 (\cf5 randomIndex\cf8 ,\cf5  \cf14 1\cf8 )[\cf14 0\cf8 ]);\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  resetPiece\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 pieceBag\cf8 .\cf5 length \cf8 ===\cf5  \cf14 0\cf8 )\cf5  refillBag\cf8 ();\cf5 \cb1 \
\cb3             \cf12 const\cf5  type \cf8 =\cf5  pieceBag\cf8 .\cf5 pop\cf8 ();\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf13 TETROMINOES\cf8 [\cf5 type\cf8 ])\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 console\cf8 .\cf5 error\cf8 (\cf9 "Error: Tipo de pieza desconocido:"\cf8 ,\cf5  type\cf8 );\cf5 \cb1 \
\cb3                 gameOver \cf8 =\cf5  \cf12 true\cf8 ;\cf5  \cb1 \
\cb3                 \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             \cf12 const\cf5  pieceDetails \cf8 =\cf5  \cf13 TETROMINOES\cf8 [\cf5 type\cf8 ];\cf5 \cb1 \
\cb3             currentPiece \cf8 =\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 pos\cf8 :\cf5  \cf8 \{\cf5  x\cf8 :\cf5  \cf13 Math\cf8 .\cf5 floor\cf8 (\cf13 COLS\cf5  \cf8 /\cf5  \cf14 2\cf8 )\cf5  \cf8 -\cf5  \cf13 Math\cf8 .\cf5 floor\cf8 (\cf5 pieceDetails\cf8 .\cf5 shape\cf8 [\cf14 0\cf8 ].\cf5 length \cf8 /\cf5  \cf14 2\cf8 ),\cf5  y\cf8 :\cf5  \cf14 0\cf5  \cf8 \},\cf5 \cb1 \
\cb3                 matrix\cf8 :\cf5  pieceDetails\cf8 .\cf5 shape\cf8 ,\cf5 \cb1 \
\cb3                 color\cf8 :\cf5  pieceDetails\cf8 .\cf5 color\cb1 \
\cb3             \cf8 \};\cf5 \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 pieceBag\cf8 .\cf5 length \cf8 ===\cf5  \cf14 0\cf8 )\cf5  refillBag\cf8 ();\cf5 \cb1 \
\cb3             \cf12 const\cf5  nextType \cf8 =\cf5  pieceBag\cf8 [\cf5 pieceBag\cf8 .\cf5 length \cf8 -\cf14 1\cf8 ];\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf13 TETROMINOES\cf8 [\cf5 nextType\cf8 ])\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 console\cf8 .\cf5 error\cf8 (\cf9 "Error: Tipo de pieza siguiente desconocido:"\cf8 ,\cf5  nextType\cf8 );\cf5 \cb1 \
\cb3                 nextPiece \cf8 =\cf5  \cf8 \{\cf5 matrix\cf8 :\cf5  \cf8 [[\cf14 0\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 'gray'\cf8 \};\cf5  \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 const\cf5  nextPieceDetails \cf8 =\cf5  \cf13 TETROMINOES\cf8 [\cf5 nextType\cf8 ];\cf5 \cb1 \
\cb3                 nextPiece \cf8 =\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     matrix\cf8 :\cf5  nextPieceDetails\cf8 .\cf5 shape\cf8 ,\cf5 \cb1 \
\cb3                     color\cf8 :\cf5  nextPieceDetails\cf8 .\cf5 color\cb1 \
\cb3                 \cf8 \};\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 checkCollision\cf8 (\cf5 board\cf8 ,\cf5  currentPiece\cf8 ))\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 gameOver \cf8 =\cf5  \cf12 true\cf8 ;\cf5  \cb1 \
\cb3                 playSound\cf8 (\cf5 gameOverSound\cf8 ,\cf5  \cf9 'C3'\cf8 ,\cf5  \cf9 '1n'\cf8 );\cf5 \cb1 \
\cb3                 \cf12 if\cf8 (\cf5 animationFrameId\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                     cancelAnimationFrame\cf8 (\cf5 animationFrameId\cf8 );\cf5 \cb1 \
\cb3                     animationFrameId \cf8 =\cf5  \cf12 null\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  pieceDrop\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 isPaused \cf8 ||\cf5  gameOver \cf8 ||\cf5  \cf8 !\cf5 gameStarted \cf8 ||\cf5  \cf8 !\cf5 currentPiece\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y\cf8 ++;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 checkCollision\cf8 (\cf5 board\cf8 ,\cf5  currentPiece\cf8 ))\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y\cf8 --;\cf5  \cb1 \
\cb3                 mergePieceToBoard\cf8 ();\cf5  \cb1 \
\cb3                 playSound\cf8 (\cf5 landSound\cf8 ,\cf5  \cf9 'C2'\cf8 ,\cf5  \cf9 '16n'\cf8 );\cf5 \cb1 \
\cb3                 clearFullLines\cf8 ();\cf5     \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (!\cf5 gameOver\cf8 )\cf5  resetPiece\cf8 ();\cf5  \cb1 \
\cb3                 updateScore\cf8 (\cf14 0\cf8 );\cf5       \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             dropCounter \cf8 =\cf5  \cf14 0\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  pieceMove\cf8 (\cf5 direction\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 isPaused \cf8 ||\cf5  gameOver \cf8 ||\cf5  \cf8 !\cf5 gameStarted \cf8 ||\cf5  \cf8 !\cf5 currentPiece\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x \cf8 +=\cf5  direction\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 checkCollision\cf8 (\cf5 board\cf8 ,\cf5  currentPiece\cf8 ))\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x \cf8 -=\cf5  direction\cf8 ;\cf5  \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 playSound\cf8 (\cf5 moveSound\cf8 ,\cf5  \cf9 'C4'\cf8 ,\cf5  \cf9 '32n'\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  pieceRotate\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 isPaused \cf8 ||\cf5  gameOver \cf8 ||\cf5  \cf8 !\cf5 gameStarted \cf8 ||\cf5  \cf8 !\cf5 currentPiece\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             \cf12 const\cf5  originalMatrix \cf8 =\cf5  currentPiece\cf8 .\cf5 matrix\cf8 ;\cf5 \cb1 \
\cb3             \cf12 const\cf5  rotated \cf8 =\cf5  rotateMatrix\cf8 (\cf5 currentPiece\cf8 .\cf5 matrix\cf8 );\cf5 \cb1 \
\cb3             currentPiece\cf8 .\cf5 matrix \cf8 =\cf5  rotated\cf8 ;\cf5 \cb1 \
\
\cb3             \cf12 let\cf5  offset \cf8 =\cf5  \cf14 1\cf8 ;\cf5 \cb1 \
\cb3             \cf12 while\cf5  \cf8 (\cf5 checkCollision\cf8 (\cf5 board\cf8 ,\cf5  currentPiece\cf8 ))\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x \cf8 +=\cf5  offset\cf8 ;\cf5 \cb1 \
\cb3                 offset \cf8 =\cf5  \cf8 -(\cf5 offset \cf8 +\cf5  \cf8 (\cf5 offset \cf8 >\cf5  \cf14 0\cf5  \cf8 ?\cf5  \cf14 1\cf5  \cf8 :\cf5  \cf8 -\cf14 1\cf8 ));\cf5  \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf13 Math\cf8 .\cf5 abs\cf8 (\cf5 offset\cf8 )\cf5  \cf8 >\cf5  currentPiece\cf8 .\cf5 matrix\cf8 [\cf14 0\cf8 ].\cf5 length \cf8 +\cf5  \cf14 1\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                     currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x \cf8 -=\cf5  \cf8 (\cf5 offset \cf8 -\cf5  \cf8 (\cf5 offset \cf8 >\cf5  \cf14 0\cf5  \cf8 ?\cf5  \cf8 -\cf14 1\cf5  \cf8 :\cf5  \cf14 1\cf8 ))\cf5  \cf8 /\cf14 2\cf5  \cf8 ;\cf5  \cb1 \
\cb3                     currentPiece\cf8 .\cf5 matrix \cf8 =\cf5  originalMatrix\cf8 ;\cf5  \cb1 \
\cb3                     \cf12 return\cf8 ;\cf5  \cf11 // No se pudo rotar\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             playSound\cf8 (\cf5 rotateSound\cf8 ,\cf5  \cf9 'E4'\cf8 ,\cf5  \cf9 '16n'\cf8 );\cf5  \cf11 // Sonido si la rotaci\'f3n es exitosa\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  rotateMatrix\cf8 (\cf5 matrix\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 const\cf5  rows \cf8 =\cf5  matrix\cf8 .\cf5 length\cf8 ;\cf5 \cb1 \
\cb3             \cf12 const\cf5  cols \cf8 =\cf5  matrix\cf8 [\cf14 0\cf8 ].\cf5 length\cf8 ;\cf5 \cb1 \
\cb3             \cf12 const\cf5  newMatrix \cf8 =\cf5  \cf8 [];\cf5 \cb1 \
\cb3             \cf12 for\cf5  \cf8 (\cf12 let\cf5  y \cf8 =\cf5  \cf14 0\cf8 ;\cf5  y \cf8 <\cf5  cols\cf8 ;\cf5  y\cf8 ++)\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 newMatrix\cf8 [\cf5 y\cf8 ]\cf5  \cf8 =\cf5  \cf8 [];\cf5 \cb1 \
\cb3                 \cf12 for\cf5  \cf8 (\cf12 let\cf5  x \cf8 =\cf5  \cf14 0\cf8 ;\cf5  x \cf8 <\cf5  rows\cf8 ;\cf5  x\cf8 ++)\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     newMatrix\cf8 [\cf5 y\cf8 ][\cf5 x\cf8 ]\cf5  \cf8 =\cf5  matrix\cf8 [\cf5 rows \cf8 -\cf5  \cf14 1\cf5  \cf8 -\cf5  x\cf8 ][\cf5 y\cf8 ];\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             \cf12 return\cf5  newMatrix\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  checkCollision\cf8 (\cf5 boardToCheck\cf8 ,\cf5  pieceToCheck\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 pieceToCheck \cf8 ||\cf5  \cf8 !\cf5 pieceToCheck\cf8 .\cf5 matrix\cf8 )\cf5  \cf12 return\cf5  \cf12 true\cf8 ;\cf5  \cb1 \
\cb3             \cf12 const\cf5  \cf8 \{\cf5  matrix\cf8 ,\cf5  pos \cf8 \}\cf5  \cf8 =\cf5  pieceToCheck\cf8 ;\cf5 \cb1 \
\cb3             \cf12 for\cf5  \cf8 (\cf12 let\cf5  y_matrix \cf8 =\cf5  \cf14 0\cf8 ;\cf5  y_matrix \cf8 <\cf5  matrix\cf8 .\cf5 length\cf8 ;\cf5  y_matrix\cf8 ++)\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 \cf12 for\cf5  \cf8 (\cf12 let\cf5  x_matrix \cf8 =\cf5  \cf14 0\cf8 ;\cf5  x_matrix \cf8 <\cf5  matrix\cf8 [\cf5 y_matrix\cf8 ].\cf5 length\cf8 ;\cf5  x_matrix\cf8 ++)\cf5  \cf8 \{\cf5  \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 matrix\cf8 [\cf5 y_matrix\cf8 ][\cf5 x_matrix\cf8 ]\cf5  \cf8 !==\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                         \cf12 const\cf5  boardX \cf8 =\cf5  x_matrix \cf8 +\cf5  pos\cf8 .\cf5 x\cf8 ;\cf5  \cb1 \
\cb3                         \cf12 const\cf5  boardY \cf8 =\cf5  y_matrix \cf8 +\cf5  pos\cf8 .\cf5 y\cf8 ;\cf5  \cb1 \
\
\cb3                         \cf12 if\cf5  \cf8 (\cf5 boardX \cf8 <\cf5  \cf14 0\cf5  \cf8 ||\cf5  boardX \cf8 >=\cf5  \cf13 COLS\cf5  \cf8 ||\cf5  boardY \cf8 >=\cf5  \cf13 ROWS\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                             \cf12 return\cf5  \cf12 true\cf8 ;\cf5 \cb1 \
\cb3                         \cf8 \}\cf5 \cb1 \
\cb3                         \cf12 if\cf5  \cf8 (\cf5 boardY \cf8 >=\cf5  \cf14 0\cf5  \cf8 &&\cf5  \cb1 \
\cb3                             boardToCheck\cf8 [\cf5 boardY\cf8 ]\cf5  \cf8 &&\cf5  \cb1 \
\cb3                             boardToCheck\cf8 [\cf5 boardY\cf8 ][\cf5 boardX\cf8 ]\cf5  \cf8 !==\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                             \cf12 return\cf5  \cf12 true\cf8 ;\cf5 \cb1 \
\cb3                         \cf8 \}\cf5 \cb1 \
\cb3                     \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             \cf12 return\cf5  \cf12 false\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  mergePieceToBoard\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 currentPiece\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             currentPiece\cf8 .\cf5 matrix\cf8 .\cf5 forEach\cf8 ((\cf5 row\cf8 ,\cf5  y\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 row\cf8 .\cf5 forEach\cf8 ((\cf5 value\cf8 ,\cf5  x\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 value \cf8 !==\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                          \cf12 if\cf5  \cf8 (\cf5 y \cf8 +\cf5  currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y \cf8 >=\cf14 0\cf5  \cf8 &&\cf5  y \cf8 +\cf5  currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y \cf8 <\cf5  \cf13 ROWS\cf5  \cf8 &&\cf5 \cb1 \
\cb3                              x \cf8 +\cf5  currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x \cf8 >=\cf14 0\cf5  \cf8 &&\cf5  x \cf8 +\cf5  currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x \cf8 <\cf5  \cf13 COLS\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                             board\cf8 [\cf5 y \cf8 +\cf5  currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y\cf8 ][\cf5 x \cf8 +\cf5  currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x\cf8 ]\cf5  \cf8 =\cf5  currentPiece\cf8 .\cf5 color\cf8 ;\cf5 \cb1 \
\cb3                          \cf8 \}\cf5 \cb1 \
\cb3                     \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \});\cf5 \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  clearFullLines\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 let\cf5  linesRemovedThisTurn \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3             outer\cf8 :\cf5  \cf12 for\cf5  \cf8 (\cf12 let\cf5  y \cf8 =\cf5  \cf13 ROWS\cf5  \cf8 -\cf5  \cf14 1\cf8 ;\cf5  y \cf8 >=\cf5  \cf14 0\cf8 ;\cf5  y\cf8 --)\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 for\cf5  \cf8 (\cf12 let\cf5  x \cf8 =\cf5  \cf14 0\cf8 ;\cf5  x \cf8 <\cf5  \cf13 COLS\cf8 ;\cf5  x\cf8 ++)\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 board\cf8 [\cf5 y\cf8 ][\cf5 x\cf8 ]\cf5  \cf8 ===\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                         \cf12 continue\cf5  outer\cf8 ;\cf5  \cb1 \
\cb3                     \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3                 \cf12 const\cf5  row \cf8 =\cf5  board\cf8 .\cf5 splice\cf8 (\cf5 y\cf8 ,\cf5  \cf14 1\cf8 )[\cf14 0\cf8 ].\cf5 fill\cf8 (\cf14 0\cf8 );\cf5  \cb1 \
\cb3                 board\cf8 .\cf5 unshift\cf8 (\cf5 row\cf8 );\cf5  \cb1 \
\cb3                 y\cf8 ++;\cf5  \cb1 \
\cb3                 linesRemovedThisTurn\cf8 ++;\cf5 \cb1 \
\cb3                 linesCleared\cf8 ++;\cf5  \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 linesRemovedThisTurn \cf8 >\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 playPolySound\cf8 (\cf5 lineClearSound\cf8 ,\cf5  \cf8 [\cf9 'C4'\cf8 ,\cf5  \cf9 'E4'\cf8 ,\cf5  \cf9 'G4'\cf8 ],\cf5  \cf9 '4n'\cf8 );\cf5 \cb1 \
\cb3                 updateScore\cf8 (\cf5 linesRemovedThisTurn\cf8 );\cf5 \cb1 \
\cb3                 updateLevel\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  updateScore\cf8 (\cf5 lines\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 let\cf5  points \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 lines \cf8 ===\cf5  \cf14 1\cf8 )\cf5  points \cf8 =\cf5  \cf14 40\cf5  \cf8 *\cf5  level\cf8 ;\cf5 \cb1 \
\cb3             \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 lines \cf8 ===\cf5  \cf14 2\cf8 )\cf5  points \cf8 =\cf5  \cf14 100\cf5  \cf8 *\cf5  level\cf8 ;\cf5 \cb1 \
\cb3             \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 lines \cf8 ===\cf5  \cf14 3\cf8 )\cf5  points \cf8 =\cf5  \cf14 300\cf5  \cf8 *\cf5  level\cf8 ;\cf5 \cb1 \
\cb3             \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 lines \cf8 >=\cf5  \cf14 4\cf8 )\cf5  points \cf8 =\cf5  \cf14 1200\cf5  \cf8 *\cf5  level\cf8 ;\cf5  \cb1 \
\cb3             \cb1 \
\cb3             score \cf8 +=\cf5  points\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 scoreDisplay\cf8 )\cf5  scoreDisplay\cf8 .\cf5 textContent \cf8 =\cf5  score\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 linesDisplay\cf8 )\cf5  linesDisplay\cf8 .\cf5 textContent \cf8 =\cf5  linesCleared\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  updateLevel\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 const\cf5  oldLevel \cf8 =\cf5  level\cf8 ;\cf5 \cb1 \
\cb3             \cf12 const\cf5  calculatedLevel \cf8 =\cf5  \cf13 Math\cf8 .\cf5 floor\cf8 (\cf5 linesCleared \cf8 /\cf5  \cf13 LINES_PER_LEVEL\cf8 )\cf5  \cf8 +\cf5  \cf14 1\cf8 ;\cf5 \cb1 \
\cb3             \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 gameStarted \cf8 &&\cf5  calculatedLevel \cf8 >\cf5  level \cf8 &&\cf5  level \cf8 <\cf5  \cf14 12\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 level \cf8 =\cf5  calculatedLevel\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 `\'a1Nivel \cf8 $\{\cf5 level\cf8 \}\cf9 !`\cf8 ;\cf5 \cb1 \
\cb3                 playPolySound\cf8 (\cf5 levelUpSound\cf8 ,\cf5  \cf8 [\cf9 'C5'\cf8 ,\cf5  \cf9 'E5'\cf8 ,\cf5  \cf9 'G5'\cf8 ,\cf5  \cf9 'C6'\cf8 ],\cf5  \cf9 '2n'\cf8 );\cf5 \cb1 \
\cb3                 setTimeout\cf8 (()\cf5  \cf8 =>\cf5  \cf8 \{\cf5  \cf12 if\cf8 (\cf5 messageArea \cf8 &&\cf5  \cf8 !\cf5 gameOver \cf8 &&\cf5  gameStarted \cf8 &&\cf5  \cf8 !\cf5 isPaused\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 ""\cf8 ;\},\cf5  \cf14 2000\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 level \cf8 >\cf5  \cf14 12\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 level \cf8 =\cf5  \cf14 12\cf8 ;\cf5  \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 levelDisplay\cf8 )\cf5  levelDisplay\cf8 .\cf5 textContent \cf8 =\cf5  level\cf8 ;\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 levelTextUnderAnimal\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 levelTextUnderAnimal\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 `Nivel \cf8 $\{\cf5 level\cf8 \}\cf9 `\cf8 ;\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             dropInterval \cf8 =\cf5  \cf13 Math\cf8 .\cf5 max\cf8 (\cf14 1000\cf5  \cf8 -\cf5  \cf8 ((\cf5 level \cf8 -\cf5  \cf14 1\cf8 )\cf5  \cf8 *\cf5  \cf14 75\cf8 ),\cf5  \cf14 150\cf8 );\cf5  \cb1 \
\cb3             updateAnimalDisplay\cf8 ();\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf12 function\cf5  updateAnimalDisplay\cf8 ()\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 animalImageElement\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             \cf12 const\cf5  currentAnimal \cf8 =\cf5  \cf13 ANIMALS\cf8 [\cf13 Math\cf8 .\cf5 min\cf8 (\cf5 level \cf8 -\cf5  \cf14 1\cf8 ,\cf5  \cf13 ANIMALS\cf8 .\cf5 length \cf8 -\cf5  \cf14 1\cf8 )];\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 currentAnimal\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 animalImageElement\cf8 .\cf5 src \cf8 =\cf5  currentAnimal\cf8 .\cf5 imageName\cf8 ;\cf5  \cb1 \
\cb3                 animalImageElement\cf8 .\cf5 alt \cf8 =\cf5  currentAnimal\cf8 .\cf5 name\cf8 ;\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  draw\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 context \cf8 ||\cf5  \cf8 !\cf5 nextPieceContext\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\
\cb3             \cf12 const\cf5  mainCanvasBg \cf8 =\cf5  getComputedStyle\cf8 (\cf5 canvas\cf8 ).\cf5 backgroundColor\cf8 ;\cf5 \cb1 \
\cb3             context\cf8 .\cf5 fillStyle \cf8 =\cf5  mainCanvasBg\cf8 ;\cf5  \cb1 \
\cb3             context\cf8 .\cf5 fillRect\cf8 (\cf14 0\cf8 ,\cf5  \cf14 0\cf8 ,\cf5  canvas\cf8 .\cf5 width \cf8 /\cf5  \cf13 BLOCK_SIZE\cf8 ,\cf5  canvas\cf8 .\cf5 height \cf8 /\cf5  \cf13 BLOCK_SIZE\cf8 );\cf5  \cb1 \
\
\cb3             drawBoard\cf8 ();\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 currentPiece\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 drawMatrix\cf8 (\cf5 currentPiece\cf8 .\cf5 matrix\cf8 ,\cf5  currentPiece\cf8 .\cf5 pos\cf8 ,\cf5  context\cf8 ,\cf5  currentPiece\cf8 .\cf5 color\cf8 );\cf5  \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\
\cb3             \cf12 const\cf5  nextCanvasBg \cf8 =\cf5  getComputedStyle\cf8 (\cf5 nextPieceCanvas\cf8 ).\cf5 backgroundColor\cf8 ;\cf5 \cb1 \
\cb3             nextPieceContext\cf8 .\cf5 fillStyle \cf8 =\cf5  nextCanvasBg\cf8 ;\cf5 \cb1 \
\cb3             nextPieceContext\cf8 .\cf5 fillRect\cf8 (\cf14 0\cf8 ,\cf5  \cf14 0\cf8 ,\cf5  nextPieceCanvas\cf8 .\cf5 width \cf8 /\cf5  \cf13 NEXT_PIECE_BLOCK_SIZE\cf8 ,\cf5  nextPieceCanvas\cf8 .\cf5 height \cf8 /\cf5  \cf13 NEXT_PIECE_BLOCK_SIZE\cf8 );\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 nextPiece \cf8 &&\cf5  nextPiece\cf8 .\cf5 matrix\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 \cf12 const\cf5  offsetX \cf8 =\cf5  \cf8 (\cf13 NEXT_PIECE_COLS\cf5  \cf8 -\cf5  nextPiece\cf8 .\cf5 matrix\cf8 [\cf14 0\cf8 ].\cf5 length\cf8 )\cf5  \cf8 /\cf5  \cf14 2\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 const\cf5  offsetY \cf8 =\cf5  \cf8 (\cf13 NEXT_PIECE_ROWS\cf5  \cf8 -\cf5  nextPiece\cf8 .\cf5 matrix\cf8 .\cf5 length\cf8 )\cf5  \cf8 /\cf5  \cf14 2\cf8 ;\cf5 \cb1 \
\cb3                 drawMatrix\cf8 (\cf5 nextPiece\cf8 .\cf5 matrix\cf8 ,\cf5  \cf8 \{\cf5 x\cf8 :\cf5  offsetX\cf8 ,\cf5  y\cf8 :\cf5  offsetY\cf8 \},\cf5  nextPieceContext\cf8 ,\cf5  nextPiece\cf8 .\cf5 color\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  gameLoop\cf8 (\cf5 time \cf8 =\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 gameOver \cf8 ||\cf5  \cf8 !\cf5 gameStarted\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 \cf12 return\cf8 ;\cf5  \cb1 \
\cb3             \cf8 \}\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 isPaused\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 animationFrameId \cf8 =\cf5  requestAnimationFrame\cf8 (\cf5 gameLoop\cf8 );\cf5  \cb1 \
\cb3                 \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\
\cb3             \cf12 const\cf5  deltaTime \cf8 =\cf5  time \cf8 -\cf5  lastTime\cf8 ;\cf5 \cb1 \
\cb3             lastTime \cf8 =\cf5  time\cf8 ;\cf5 \cb1 \
\cb3             dropCounter \cf8 +=\cf5  deltaTime\cf8 ;\cf5 \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 dropCounter \cf8 >\cf5  dropInterval\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 pieceDrop\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\
\cb3             draw\cf8 ();\cf5 \cb1 \
\cb3             animationFrameId \cf8 =\cf5  requestAnimationFrame\cf8 (\cf5 gameLoop\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         document\cf8 .\cf5 addEventListener\cf8 (\cf9 'keydown'\cf8 ,\cf5  event \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 gameStarted \cf8 ||\cf5  gameOver \cf8 ||\cf5  isPaused\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'ArrowUp'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'ArrowDown'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 ' '\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 event\cf8 .\cf5 preventDefault\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'ArrowLeft'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'a'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'A'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 pieceMove\cf8 (-\cf14 1\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'ArrowRight'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'd'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'D'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 pieceMove\cf8 (\cf14 1\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'ArrowDown'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 's'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'S'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 pieceDrop\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'ArrowUp'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'w'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'W'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 pieceRotate\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 ' '\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (!\cf5 currentPiece\cf8 )\cf5  \cf12 return\cf8 ;\cf5  \cb1 \
\cb3                 \cf12 while\cf5  \cf8 (!\cf5 checkCollision\cf8 (\cf5 board\cf8 ,\cf5  currentPiece\cf8 ))\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y\cf8 ++;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3                 currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y\cf8 --;\cf5 \cb1 \
\cb3                 pieceDrop\cf8 ();\cf5  \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'p'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'P'\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 togglePause\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \});\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf12 function\cf5  togglePause\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 gameStarted \cf8 ||\cf5  gameOver\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             isPaused \cf8 =\cf5  \cf8 !\cf5 isPaused\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 isPaused\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Juego Pausado"\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 pauseButton\cf8 )\cf5  pauseButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Reanudar"\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 animationFrameId\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     cancelAnimationFrame\cf8 (\cf5 animationFrameId\cf8 );\cf5 \cb1 \
\cb3                     animationFrameId \cf8 =\cf5  \cf12 null\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 ""\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 pauseButton\cf8 )\cf5  pauseButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Pausar"\cf8 ;\cf5 \cb1 \
\cb3                 lastTime \cf8 =\cf5  performance\cf8 .\cf5 now\cf8 ();\cf5  \cb1 \
\cb3                 dropCounter \cf8 =\cf5  \cf14 0\cf8 ;\cf5  \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (!\cf5 animationFrameId\cf8 )\cf5  animationFrameId \cf8 =\cf5  requestAnimationFrame\cf8 (\cf5 gameLoop\cf8 );\cf5  \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf11 // --- Event Listeners para Botones ---\cf5 \cb1 \
\cb3         \cf12 if\cf5  \cf8 (\cf5 continueToLevelSelectButton\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             continueToLevelSelectButton\cf8 .\cf5 addEventListener\cf8 (\cf9 'click'\cf8 ,\cf5  \cf8 ()\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf12 typeof\cf5  \cf13 Tone\cf5  \cf8 !==\cf5  \cf9 'undefined'\cf5  \cf8 &&\cf5  \cf13 Tone\cf8 .\cf5 context\cf8 .\cf5 state \cf8 !==\cf5  \cf9 'running'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf13 Tone\cf8 .\cf5 start\cf8 ();\cf5  \cf11 // Iniciar contexto de audio en interacci\'f3n del usuario\cf5 \cb1 \
\cb3                     console\cf8 .\cf5 log\cf8 (\cf9 "Contexto de Audio de Tone.js iniciado."\cf8 );\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3                 playerName \cf8 =\cf5  playerNameInput\cf8 .\cf5 value\cf8 .\cf5 trim\cf8 ();\cf5 \cb1 \
\cb3                 playerAge \cf8 =\cf5  playerAgeInput\cf8 .\cf5 value\cf8 .\cf5 trim\cf8 ();\cf5 \cb1 \
\
\cb3                 \cf12 if\cf5  \cf8 (!\cf5 playerName \cf8 ||\cf5  \cf8 !\cf5 playerAge\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Por favor, ingresa tu nombre y edad."\cf8 ;\cf5 \cb1 \
\cb3                     \cf12 return\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3                 console\cf8 .\cf5 log\cf8 (\cf9 "Nombre:"\cf8 ,\cf5  playerName\cf8 ,\cf5  \cf9 "Edad:"\cf8 ,\cf5  playerAge\cf8 );\cf5 \cb1 \
\cb3                 showLevelSelectionMenu\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3             console\cf8 .\cf5 error\cf8 (\cf9 "Bot\'f3n 'Continuar' del men\'fa de info no encontrado."\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf12 if\cf5  \cf8 (\cf5 mainActionButton\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             mainActionButton\cf8 .\cf5 addEventListener\cf8 (\cf9 'click'\cf8 ,\cf5  \cf8 ()\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 showPlayerInfoMenu\cf8 ();\cf5  \cf11 // Volver al men\'fa de informaci\'f3n del jugador\cf5 \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3             console\cf8 .\cf5 error\cf8 (\cf9 "Error: Bot\'f3n principal (mainActionButton) no encontrado."\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 if\cf5  \cf8 (\cf5 pauseButton\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             pauseButton\cf8 .\cf5 addEventListener\cf8 (\cf9 'click'\cf8 ,\cf5  togglePause\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3             console\cf8 .\cf5 error\cf8 (\cf9 "Error: Bot\'f3n de pausa (pauseButton) no encontrado."\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 if\cf5  \cf8 (\cf5 soundButton\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             soundButton\cf8 .\cf5 addEventListener\cf8 (\cf9 'click'\cf8 ,\cf5  \cf8 ()\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf2 <!DOCTYPE\cf4  html\cf2 >\cf5 \cb1 \
\cf6 \cb3 <\cf2 html\cf5  \cf4 lang\cf6 =\cf7 "es"\cf6 >\cf5 \cb1 \
\cf6 \cb3 <\cf2 head\cf6 >\cf5 \cb1 \
\cb3     \cf6 <\cf2 meta\cf5  \cf4 charset\cf6 =\cf7 "UTF-8"\cf6 >\cf5 \cb1 \
\cb3     \cf6 <\cf2 meta\cf5  \cf4 name\cf6 =\cf7 "viewport"\cf5  \cf4 content\cf6 =\cf7 "width=device-width, initial-scale=1.0"\cf6 >\cf5 \cb1 \
\cb3     \cf6 <\cf2 title\cf6 >\cf5 Tetris Evaluativo\cf6 </\cf2 title\cf6 >\cf5  \cb1 \
\cb3     \cf6 <\cf2 link\cf5  \cf4 href\cf6 =\cf7 "https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Baloo+2:wght@400;500;700&display=swap"\cf5  \cf4 rel\cf6 =\cf7 "stylesheet"\cf6 >\cf5 \cb1 \
\cb3     \cf6 <\cf2 script\cf5  \cf4 src\cf6 =\cf7 "https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"\cf6 ></\cf2 script\cf6 >\cf5 \cb1 \
\cb3     \cf6 <\cf2 style\cf6 >\cf5 \cb1 \
\cb3         \cf2 body\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 background-color:\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 color:\cf5  #333\cf8 ;\cf5  \cb1 \
\cb3             \cf4 display:\cf5  \cf7 flex\cf8 ;\cf5 \cb1 \
\cb3             \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5 \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 justify-content:\cf5  \cf7 flex-start\cf8 ;\cf5 \cb1 \
\cb3             \cf4 min-height:\cf5  \cf10 100vh\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin:\cf5  \cf10 0\cf8 ;\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 10px\cf8 ;\cf5  \cf11 /* Padding general del body reducido */\cf5 \cb1 \
\cb3             \cf4 box-sizing:\cf5  \cf7 border-box\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 500\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 h1\cf5  \cf8 \{\cf5  \cf11 /* T\'edtulo Principal del Juego */\cf5 \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5  \cb1 \
\cb3             \cf4 color:\cf5  #ff6347\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 10px\cf8 ;\cf5  \cf11 /* Margen superior reducido */\cf5 \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 0px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 4.7em\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 text-transform:\cf5  \cf7 uppercase\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 #companyLogo\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 display:\cf5  \cf7 block\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin:\cf5  \cf10 0\cf5  \cf7 auto\cf5  \cf10 15px\cf5  \cf7 auto\cf8 ;\cf5  \cf11 /* Margen inferior reducido */\cf5 \cb1 \
\cb3             \cf4 max-width:\cf5  \cf10 180px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 max-height:\cf5  \cf10 70px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 8px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 #playerInfoMenu\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 flex\cf8 ;\cf5  \cb1 \
\cb3             \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5 \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 justify-content:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 width:\cf5  \cf10 100%\cf8 ;\cf5 \cb1 \
\cb3             \cf4 max-width:\cf5  \cf10 500px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 20px\cf8 ;\cf5  \cf11 /* Margen inferior reducido */\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 20px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #e0f7fa\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 20px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 8px\cf5  \cf10 16px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.1\cf7 )\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 #playerInfoMenu\cf5  \cf2 h2\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #00796b\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.6em\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 0\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 15px\cf8 ;\cf5  \cf11 /* Margen inferior reducido */\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .input-group\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 10px\cf8 ;\cf5  \cf11 /* Margen inferior reducido */\cf5 \cb1 \
\cb3             \cf4 width:\cf5  \cf10 100%\cf8 ;\cf5 \cb1 \
\cb3             \cf4 max-width:\cf5  \cf10 300px\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .input-group\cf5  \cf2 label\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 block\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #004d40\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 5px\cf8 ;\cf5 \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 left\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .input-group\cf5  \cf2 input\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 width:\cf5  \cf10 100%\cf8 ;\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 8px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 8px\cf8 ;\cf5 \cb1 \
\cb3             \cf4 border:\cf5  \cf10 2px\cf5  \cf7 solid\cf5  #4dd0e1\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-sizing:\cf5  \cf7 border-box\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf2 #playerInfoMenu\cf5  \cf2 button\cf5  \cf8 \{\cf5 \cb1 \
\cb3              \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #28a745\cf8 ;\cf5  \cb1 \
\cb3             \cf4 color:\cf5  \cf7 white\cf8 ;\cf5 \cb1 \
\cb3             \cf4 border:\cf5  \cf7 none\cf8 ;\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 10px\cf5  \cf10 25px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 10px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 cursor:\cf5  \cf7 pointer\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.1em\cf8 ;\cf5  \cb1 \
\cb3             \cf4 transition:\cf5  \cf7 background-color\cf5  \cf10 0.3s\cf8 ,\cf5  \cf7 transform\cf5  \cf10 0.1s\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 4px\cf5  #1e7e34\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 10px\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 #playerInfoMenu\cf5  \cf2 button:hover\cf8 \{\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #1e7e34\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3          \cf2 #playerInfoMenu\cf5  \cf2 button:active\cf8 \{\cf5 \cb1 \
\cb3             \cf4 transform:\cf5  \cf7 translateY(\cf10 2px\cf7 )\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 2px\cf5  #1e7e34\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf2 #levelSelectionMenu\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 none\cf8 ;\cf5  \cb1 \
\cb3             \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5 \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 justify-content:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 width:\cf5  \cf10 100%\cf8 ;\cf5 \cb1 \
\cb3             \cf4 max-width:\cf5  \cf10 720px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 20px\cf8 ;\cf5  \cf11 /* Margen inferior reducido */\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 20px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #bde0fe\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 20px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 8px\cf5  \cf10 16px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.1\cf7 )\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf2 #levelSelectionMenu\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #4a4a4a\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.8em\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 0\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 20px\cf8 ;\cf5  \cf11 /* Margen inferior reducido */\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-grid\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 grid\cf8 ;\cf5 \cb1 \
\cb3             \cf4 grid-template-columns:\cf5  \cf7 repeat(auto-fit\cf8 ,\cf5  \cf7 minmax(\cf10 130px\cf8 ,\cf5  \cf10 1fr\cf7 ))\cf8 ;\cf5  \cb1 \
\cb3             \cf4 gap:\cf5  \cf10 15px\cf8 ;\cf5  \cf11 /* Gap reducido */\cf5 \cb1 \
\cb3             \cf4 width:\cf5  \cf10 100%\cf8 ;\cf5 \cb1 \
\cb3             \cf4 justify-items:\cf5  \cf7 center\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-item-container\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 display:\cf5  \cf7 flex\cf8 ;\cf5 \cb1 \
\cb3             \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5 \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 gap:\cf5  \cf10 8px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-card\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 background-color:\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 color:\cf5  #333\cf8 ;\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 5px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 15px\cf8 ;\cf5 \cb1 \
\cb3             \cf4 cursor:\cf5  \cf7 pointer\cf8 ;\cf5 \cb1 \
\cb3             \cf4 transition:\cf5  \cf7 transform\cf5  \cf10 0.2s\cf5  \cf7 ease\cf8 ,\cf5  \cf7 box-shadow\cf5  \cf10 0.2s\cf5  \cf7 ease\cf8 ;\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 flex\cf8 ;\cf5  \cb1 \
\cb3             \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5 \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 justify-content:\cf5  \cf7 center\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 6px\cf5  \cf10 12px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.1\cf7 )\cf8 ;\cf5 \cb1 \
\cb3             \cf4 border:\cf5  \cf10 3px\cf5  \cf7 solid\cf5  \cf7 transparent\cf8 ;\cf5 \cb1 \
\cb3             \cf4 width:\cf5  \cf10 130px\cf8 ;\cf5   \cb1 \
\cb3             \cf4 height:\cf5  \cf10 130px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-card:hover\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 transform:\cf5  \cf7 translateY(\cf10 -7px\cf7 )\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 10px\cf5  \cf10 20px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.15\cf7 )\cf8 ;\cf5 \cb1 \
\cb3             \cf4 border-color:\cf5  #ffc857\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-card-animal-image\cf5  \cf8 \{\cf5   \cb1 \
\cb3             \cf4 width:\cf5  \cf10 120px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 height:\cf5  \cf10 120px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 object-fit:\cf5  \cf7 contain\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 10px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-number-display\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.1em\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5  \cb1 \
\cb3             \cf4 color:\cf5  #4895ef\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .game-container\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 none\cf8 ;\cf5  \cb1 \
\cb3             \cf4 flex-wrap:\cf5  \cf7 wrap\cf8 ;\cf5  \cb1 \
\cb3             \cf4 gap:\cf5  \cf10 15px\cf8 ;\cf5  \cf11 /* Gap reducido */\cf5 \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 flex-start\cf8 ;\cf5 \cb1 \
\cb3             \cf4 justify-content:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 15px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #bde0fe\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 20px\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 8px\cf5  \cf10 16px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.1\cf7 )\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 #gameCanvas\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 border:\cf5  \cf10 4px\cf5  \cf7 solid\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 8px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 background-color:\cf5  #4895ef\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf7 inset\cf5  \cf10 0\cf5  \cf10 0\cf5  \cf10 10px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.15\cf7 )\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .info-panel\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 flex\cf8 ;\cf5 \cb1 \
\cb3             \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5 \cb1 \
\cb3             \cf4 gap:\cf5  \cf10 8px\cf8 ;\cf5  \cf11 /* Gap reducido */\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 10px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #72cff9\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 15px\cf8 ;\cf5 \cb1 \
\cb3             \cf4 min-width:\cf5  \cf10 180px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 left\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 6px\cf5  \cf10 12px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.1\cf7 )\cf8 ;\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #2b2b2b\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .info-panel\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 0\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.2em\cf8 ;\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #00796b\cf8 ;\cf5  \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 6px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 8px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 5px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .info-panel\cf5  \cf2 p\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin:\cf5  \cf10 4px\cf5  \cf10 0\cf8 ;\cf5  \cf11 /* Margen reducido */\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.1em\cf8 ;\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5  \cb1 \
\cb3             \cf4 display:\cf5  \cf7 flex\cf8 ;\cf5  \cb1 \
\cb3             \cf4 justify-content:\cf5  \cf7 space-between\cf8 ;\cf5  \cb1 \
\cb3             \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .info-panel\cf5  \cf2 p\cf5  \cf2 span\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 color:\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 background-color:\cf5  #4895ef\cf8 ;\cf5  \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 2px\cf5  \cf10 6px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 5px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 0.85em\cf8 ;\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 #nextPieceCanvas\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 border:\cf5  \cf10 2px\cf5  \cf7 solid\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 6px\cf8 ;\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #4895ef\cf8 ;\cf5  \cb1 \
\cb3             \cf4 display:\cf5  \cf7 block\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin:\cf5  \cf10 5px\cf5  \cf7 auto\cf5  \cf10 0\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .controls\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 display:\cf5  \cf7 none\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 10px\cf8 ;\cf5  \cf11 /* Margen superior reducido */\cf5 \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 .messages\cf5  \cf8 \{\cf5 \cb1 \
\cb3              \cf4 display:\cf5  \cf7 none\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 10px\cf8 ;\cf5  \cf11 /* Margen superior reducido */\cf5 \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf2 button\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5  \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #D9534F\cf8 ;\cf5  \cb1 \
\cb3             \cf4 color:\cf5  \cf7 white\cf8 ;\cf5 \cb1 \
\cb3             \cf4 border:\cf5  \cf7 none\cf8 ;\cf5 \cb1 \
\cb3             \cf4 padding:\cf5  \cf10 10px\cf5  \cf10 20px\cf8 ;\cf5  \cf11 /* Padding reducido */\cf5 \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 10px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 cursor:\cf5  \cf7 pointer\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf4 transition:\cf5  \cf7 background-color\cf5  \cf10 0.3s\cf8 ,\cf5  \cf7 transform\cf5  \cf10 0.1s\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 4px\cf5  #C9302C\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin:\cf5  \cf10 5px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 letter-spacing:\cf5  \cf10 0.5px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 button:hover\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #C9302C\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 button:active\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 transform:\cf5  \cf7 translateY(\cf10 2px\cf7 )\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 2px\cf5  #AC2925\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 #pauseButton\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 background-color:\cf5  #ffc857\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 4px\cf5  #e0a82e\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 #pauseButton:hover\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #ffb732\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3          \cf2 #pauseButton:active\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 transform:\cf5  \cf7 translateY(\cf10 2px\cf7 )\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 2px\cf5  #e0a82e\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 #soundButton\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #5bc0de\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 4px\cf5  #31b0d5\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 #soundButton:hover\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 background-color:\cf5  #31b0d5\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf2 #soundButton:active\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf4 transform:\cf5  \cf7 translateY(\cf10 2px\cf7 )\cf8 ;\cf5 \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 2px\cf5  #31b0d5\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf2 #messageArea\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1.1em\cf8 ;\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #ff6347\cf8 ;\cf5  \cb1 \
\cb3             \cf4 min-height:\cf5  \cf10 25px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 8px\cf8 ;\cf5  \cf11 /* Margen reducido */\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf2 #animalDisplayContainer\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 8px\cf8 ;\cf5  \cf11 /* Margen reducido */\cf5 \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 10px\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf2 #animalImageElement\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 width:\cf5  \cf10 60px\cf8 ;\cf5   \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf4 height:\cf5  \cf10 60px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 object-fit:\cf5  \cf7 contain\cf8 ;\cf5  \cb1 \
\cb3             \cf4 background-color:\cf5  #ffffff\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border-radius:\cf5  \cf10 50%\cf8 ;\cf5  \cb1 \
\cb3             \cf4 display:\cf5  \cf7 block\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin:\cf5  \cf10 0\cf5  \cf7 auto\cf5  \cf10 5px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 border:\cf5  \cf10 3px\cf5  \cf7 solid\cf5  #4895ef\cf8 ;\cf5  \cb1 \
\cb3             \cf4 box-shadow:\cf5  \cf10 0\cf5  \cf10 0\cf5  \cf10 8px\cf5  \cf7 rgba(\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0\cf8 ,\cf10 0.1\cf7 )\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf2 .level-text-info-panel\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf4 font-family:\cf5  \cf9 'Baloo 2'\cf8 ,\cf5  \cf7 cursive\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-weight:\cf5  \cf10 700\cf8 ;\cf5 \cb1 \
\cb3             \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf4 color:\cf5  #004d40\cf8 ;\cf5  \cb1 \
\cb3             \cf4 text-align:\cf5  \cf7 center\cf8 ;\cf5 \cb1 \
\cb3             \cf4 margin-top:\cf5  \cf10 5px\cf8 ;\cf5  \cb1 \
\cb3             \cf4 margin-bottom:\cf5  \cf10 8px\cf8 ;\cf5  \cf11 /* Margen reducido */\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         @\cf2 media\cf5  (\cf2 max-width:\cf5  768\cf2 px\cf5 ) \cf8 \{\cf5 \cb1 \
\cb3             body \{ \cf4 padding:\cf5  \cf10 10px\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 h1\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 3.5em\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 #playerInfoMenu\cf5  \cf8 \{\cf5  \cf4 padding:\cf5  \cf10 20px\cf8 ;\cf5  \cf4 max-width:\cf5  \cf10 90%\cf8 ;\}\cf5 \cb1 \
\cb3             \cf2 #playerInfoMenu\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1.4em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 .input-group\cf5  \cf2 input\cf5  \cf8 \{\cf4 font-size:\cf5  \cf10 0.9em\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 8px\cf8 ;\}\cf5 \cb1 \
\
\cb3             \cf2 #levelSelectionMenu\cf5  \cf8 \{\cf5  \cf4 max-width:\cf5  \cf10 95%\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 20px\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 #levelSelectionMenu\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1.5em\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 .level-grid\cf5  \cf8 \{\cf5  \cf4 grid-template-columns:\cf5  \cf7 repeat(auto-fit\cf8 ,\cf5  \cf7 minmax(\cf10 120px\cf8 ,\cf5  \cf10 1fr\cf7 ))\cf8 ;\cf5  \cf4 gap:\cf5  \cf10 15px\cf8 ;\}\cf5  \cf11 /* Ajustado para tablet */\cf5 \cb1 \
\cb3             \cf2 .level-item-container\cf5  \cf8 \{\cf5  \cf4 gap:\cf5  \cf10 5px\cf8 ;\}\cf5 \cb1 \
\cb3             \cf2 .level-card\cf5  \cf8 \{\cf5  \cf4 width:\cf5  \cf10 120px\cf8 ;\cf5  \cf4 height:\cf5  \cf10 120px\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 5px\cf8 ;\}\cf5  \cb1 \
\cb3             \cf2 .level-card-animal-image\cf5  \cf8 \{\cf5  \cf4 width:\cf5  \cf10 110px\cf8 ;\cf5  \cf4 height:\cf5  \cf10 110px\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 .level-number-display\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\
\cb3             \cf2 .game-container\cf5  \cf8 \{\cf5  \cf4 flex-direction:\cf5  \cf7 column\cf8 ;\cf5  \cf4 align-items:\cf5  \cf7 center\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 15px\cf8 ;\cf5  \cf4 gap:\cf5  \cf10 10px\cf8 ;\cf5  \cf8 \}\cf5  \cf11 /* Gap reducido */\cf5 \cb1 \
\cb3             \cf2 .info-panel\cf5  \cf8 \{\cf5  \cf4 min-width:\cf5  \cf10 90%\cf8 ;\cf5  \cf4 order:\cf5  \cf10 -1\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 10px\cf8 ;\cf5  \cf4 gap:\cf5  \cf10 5px\cf8 ;\cf5  \cf8 \}\cf5  \cf11 /* Gap reducido */\cf5 \cb1 \
\cb3             \cf2 .info-panel\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1.1em\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 5px\cf8 ;\cf5  \cf8 \}\cf5  \cf11 /* Tama\'f1o y padding reducidos */\cf5 \cb1 \
\cb3             \cf2 .info-panel\cf5  \cf2 p\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5  \cf4 margin:\cf5  \cf10 3px\cf5  \cf10 0\cf8 ;\cf5  \cf8 \}\cf5  \cf11 /* Tama\'f1o y margen reducidos */\cf5 \cb1 \
\cb3             \cf2 #gameCanvas\cf5  \cf8 \{\cf5  \cf4 max-width:\cf5  \cf10 100%\cf8 ;\cf5  \cf4 height:\cf5  \cf7 auto\cf8 ;\cf5   \cf8 \}\cf5 \cb1 \
\cb3             \cf2 button\cf5  \cf8 \{\cf5  \cf4 padding:\cf5  \cf10 10px\cf5  \cf10 18px\cf8 ;\cf5  \cf4 font-size:\cf5  \cf10 0.9em\cf8 ;\}\cf5  \cf11 /* Botones m\'e1s peque\'f1os */\cf5 \cb1 \
\cb3             \cf2 #messageArea\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5  \cf4 margin-top:\cf5  \cf10 5px\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 #animalImageElement\cf5  \cf8 \{\cf5  \cf4 width:\cf5  \cf10 50px\cf8 ;\cf5  \cf4 height:\cf5  \cf10 50px\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 .level-text-info-panel\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 0.9em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3         \}\cb1 \
\cb3          @\cf2 media\cf5  (\cf2 max-width:\cf5  480\cf2 px\cf5 ) \cf8 \{\cf5  \cb1 \
\cb3             h1 \{ \cf4 font-size:\cf5  \cf10 2.5em\cf8 ;\cf5  \cf4 margin-bottom:\cf5  \cf10 5px\cf8 ;\}\cf5  \cf11 /* Tama\'f1o reducido */\cf5 \cb1 \
\cb3             \cf2 #companyLogo\cf5  \cf8 \{\cf5  \cf4 max-width:\cf5  \cf10 90px\cf8 ;\cf5  \cf4 max-height:\cf5  \cf10 45px\cf8 ;\cf5  \cf4 margin-bottom:\cf5  \cf10 10px\cf8 ;\}\cf5  \cb1 \
\cb3             \cf2 #playerInfoMenu\cf5  \cf8 \{\cf5  \cf4 padding:\cf5  \cf10 10px\cf8 ;\}\cf5 \cb1 \
\cb3             \cf2 #playerInfoMenu\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1.2em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\
\cb3             \cf2 #levelSelectionMenu\cf5  \cf8 \{\cf5  \cf4 padding:\cf5  \cf10 10px\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 #levelSelectionMenu\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1.2em\cf8 ;\cf5  \cf4 margin-bottom:\cf5  \cf10 10px\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 .level-grid\cf5  \cf8 \{\cf5  \cf4 grid-template-columns:\cf5  \cf7 repeat(\cf10 2\cf8 ,\cf5  \cf10 1fr\cf7 )\cf8 ;\cf5  \cf4 gap:\cf5  \cf10 10px\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 .level-item-container\cf5  \cf8 \{\cf5  \cf4 gap:\cf5  \cf10 4px\cf8 ;\}\cf5 \cb1 \
\cb3             \cf2 .level-card\cf5  \cf8 \{\cf5  \cf4 width:\cf5  \cf10 100px\cf8 ;\cf5  \cf4 height:\cf5  \cf10 100px\cf8 ;\cf5  \cf4 padding:\cf5  \cf10 4px\cf8 ;\}\cf5  \cb1 \
\cb3             \cf2 .level-card-animal-image\cf5  \cf8 \{\cf5  \cf4 width:\cf5  \cf10 90px\cf8 ;\cf5  \cf4 height:\cf5  \cf10 90px\cf8 ;\cf5  \cf8 \}\cf5  \cb1 \
\cb3             \cf2 .level-number-display\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 0.9em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 .info-panel\cf5  \cf2 h2\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 1em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 .info-panel\cf5  \cf2 p\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 0.9em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 #animalImageElement\cf5  \cf8 \{\cf5  \cf4 width:\cf5  \cf10 45px\cf8 ;\cf5  \cf4 height:\cf5  \cf10 45px\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3             \cf2 .level-text-info-panel\cf5  \cf8 \{\cf5  \cf4 font-size:\cf5  \cf10 0.8em\cf8 ;\cf5  \cf8 \}\cf5 \cb1 \
\cb3         \}\cb1 \
\cb3     \cf6 </\cf2 style\cf6 >\cf5 \cb1 \
\cf6 \cb3 </\cf2 head\cf6 >\cf5 \cb1 \
\cf6 \cb3 <\cf2 body\cf6 >\cf5 \cb1 \
\cb3     \cf6 <\cf2 h1\cf6 >\cf5 TETRIS\cf6 </\cf2 h1\cf6 >\cf5  \cb1 \
\cb3     \cf6 <\cf2 img\cf5  \cf4 id\cf6 =\cf7 "companyLogo"\cf5  \cf4 src\cf6 =\cf7 "logo_crops.png"\cf5  \cf4 alt\cf6 =\cf7 "Logo de la Empresa"\cf6 >\cf5  \cb1 \
\
\cb3     \cf6 <\cf2 div\cf5  \cf4 id\cf6 =\cf7 "playerInfoMenu"\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 h2\cf6 >\cf5 Informaci\'f3n del Jugador\cf6 </\cf2 h2\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "input-group"\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 label\cf5  \cf4 for\cf6 =\cf7 "playerNameInput"\cf6 >\cf5 Nombre:\cf6 </\cf2 label\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 input\cf5  \cf4 type\cf6 =\cf7 "text"\cf5  \cf4 id\cf6 =\cf7 "playerNameInput"\cf5  \cf4 placeholder\cf6 =\cf7 "Escribe tu nombre"\cf6 >\cf5 \cb1 \
\cb3         \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "input-group"\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 label\cf5  \cf4 for\cf6 =\cf7 "playerAgeInput"\cf6 >\cf5 Edad:\cf6 </\cf2 label\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 input\cf5  \cf4 type\cf6 =\cf7 "number"\cf5  \cf4 id\cf6 =\cf7 "playerAgeInput"\cf5  \cf4 placeholder\cf6 =\cf7 "Escribe tu edad"\cf6 >\cf5 \cb1 \
\cb3         \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 button\cf5  \cf4 id\cf6 =\cf7 "continueToLevelSelectButton"\cf6 >\cf5 Continuar\cf6 </\cf2 button\cf6 >\cf5 \cb1 \
\cb3     \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\
\
\cb3     \cf6 <\cf2 div\cf5  \cf4 id\cf6 =\cf7 "levelSelectionMenu"\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 h2\cf6 >\cf5 Elige un Nivel\cf6 </\cf2 h2\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "level-grid"\cf5  \cf4 id\cf6 =\cf7 "levelGridContainer"\cf6 >\cf5 \cb1 \
\cb3             \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\cb3     \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\
\cb3     \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "game-container"\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 canvas\cf5  \cf4 id\cf6 =\cf7 "gameCanvas"\cf6 ></\cf2 canvas\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "info-panel"\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 h2\cf6 >\cf5 Info del Juego\cf6 </\cf2 h2\cf6 >\cf5  \cf6 <\cf2 p\cf6 >\cf5 Puntuaci\'f3n: \cf6 <\cf2 span\cf5  \cf4 id\cf6 =\cf7 "score"\cf6 >\cf5 0\cf6 </\cf2 span\cf6 ></\cf2 p\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 p\cf6 >\cf5 Nivel: \cf6 <\cf2 span\cf5  \cf4 id\cf6 =\cf7 "level"\cf6 >\cf5 1\cf6 </\cf2 span\cf6 ></\cf2 p\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 p\cf6 >\cf5 L\'edneas: \cf6 <\cf2 span\cf5  \cf4 id\cf6 =\cf7 "lines"\cf6 >\cf5 0\cf6 </\cf2 span\cf6 ></\cf2 p\cf6 >\cf5 \cb1 \
\cb3             \cb1 \
\cb3             \cf6 <\cf2 div\cf5  \cf4 id\cf6 =\cf7 "animalDisplayContainer"\cf6 >\cf5 \cb1 \
\cb3                 \cf6 <\cf2 img\cf5  \cf4 id\cf6 =\cf7 "animalImageElement"\cf5  \cf4 src\cf6 =\cf7 "imagenes/conejo.png"\cf5  \cf4 alt\cf6 =\cf7 "Animal del Nivel"\cf6 >\cf5  \cb1 \
\cb3             \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\cb3             \cf6 <\cf2 p\cf5  \cf4 id\cf6 =\cf7 "levelTextUnderAnimal"\cf5  \cf4 class\cf6 =\cf7 "level-text-info-panel"\cf6 >\cf5 Nivel 1\cf6 </\cf2 p\cf6 >\cf5 \cb1 \
\cb3             \cb1 \
\cb3             \cf6 <\cf2 h2\cf6 >\cf5 Pr\'f3xima Pieza\cf6 </\cf2 h2\cf6 >\cf5  \cf6 <\cf2 canvas\cf5  \cf4 id\cf6 =\cf7 "nextPieceCanvas"\cf6 ></\cf2 canvas\cf6 >\cf5 \cb1 \
\cb3         \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\cb3     \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\
\cb3     \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "controls"\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 button\cf5  \cf4 id\cf6 =\cf7 "mainActionButton"\cf6 >\cf5 Volver al Men\'fa\cf6 </\cf2 button\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 button\cf5  \cf4 id\cf6 =\cf7 "pauseButton"\cf6 >\cf5 Pausar\cf6 </\cf2 button\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 button\cf5  \cf4 id\cf6 =\cf7 "soundButton"\cf6 >\cf5 Sonido On\cf6 </\cf2 button\cf6 >\cf5  \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\
\cb3     \cf6 <\cf2 div\cf5  \cf4 class\cf6 =\cf7 "messages"\cf6 >\cf5 \cb1 \
\cb3         \cf6 <\cf2 p\cf5  \cf4 id\cf6 =\cf7 "messageArea"\cf6 >\cf5 Ingresa tus datos para comenzar\cf6 </\cf2 p\cf6 >\cf5 \cb1 \
\cb3     \cf6 </\cf2 div\cf6 >\cf5 \cb1 \
\
\cb3     \cf6 <\cf2 script\cf6 >\cf5 \cb1 \
\cb3         \cf11 // --- Variables y Constantes del Juego ---\cf5 \cb1 \
\cb3         \cf12 const\cf5  canvas \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'gameCanvas'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  context \cf8 =\cf5  canvas\cf8 .\cf5 getContext\cf8 (\cf9 '2d'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  nextPieceCanvas \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'nextPieceCanvas'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  nextPieceContext \cf8 =\cf5  nextPieceCanvas\cf8 .\cf5 getContext\cf8 (\cf9 '2d'\cf8 );\cf5 \cb1 \
\
\cb3         \cf12 const\cf5  scoreDisplay \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'score'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  levelDisplay \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'level'\cf8 );\cf5  \cb1 \
\cb3         \cf12 const\cf5  linesDisplay \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'lines'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  messageArea \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'messageArea'\cf8 );\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf12 const\cf5  mainActionButton \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'mainActionButton'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  pauseButton \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'pauseButton'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  soundButton \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'soundButton'\cf8 );\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf12 const\cf5  animalImageElement \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'animalImageElement'\cf8 );\cf5  \cb1 \
\cb3         \cf12 const\cf5  levelTextUnderAnimal \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'levelTextUnderAnimal'\cf8 );\cf5  \cb1 \
\
\cb3         \cf12 const\cf5  playerInfoMenu \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'playerInfoMenu'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  playerNameInput \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'playerNameInput'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  playerAgeInput \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'playerAgeInput'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  continueToLevelSelectButton \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'continueToLevelSelectButton'\cf8 );\cf5 \cb1 \
\
\cb3         \cf12 const\cf5  levelSelectionMenu \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'levelSelectionMenu'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  levelGridContainer \cf8 =\cf5  document\cf8 .\cf5 getElementById\cf8 (\cf9 'levelGridContainer'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  gameContainer \cf8 =\cf5  document\cf8 .\cf5 querySelector\cf8 (\cf9 '.game-container'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  controlsDiv \cf8 =\cf5  document\cf8 .\cf5 querySelector\cf8 (\cf9 '.controls'\cf8 );\cf5 \cb1 \
\cb3         \cf12 const\cf5  messagesDiv \cf8 =\cf5  document\cf8 .\cf5 querySelector\cf8 (\cf9 '.messages'\cf8 );\cf5 \cb1 \
\
\cb3         \cf12 const\cf5  \cf13 COLS\cf5  \cf8 =\cf5  \cf14 10\cf8 ;\cf5  \cb1 \
\cb3         \cf12 const\cf5  \cf13 ROWS\cf5  \cf8 =\cf5  \cf14 20\cf8 ;\cf5  \cb1 \
\cb3         \cf12 const\cf5  \cf13 BLOCK_SIZE\cf5  \cf8 =\cf5  \cf14 24\cf8 ;\cf5  \cb1 \
\cb3         \cf12 const\cf5  \cf13 NEXT_PIECE_COLS\cf5  \cf8 =\cf5  \cf14 4\cf8 ;\cf5 \cb1 \
\cb3         \cf12 const\cf5  \cf13 NEXT_PIECE_ROWS\cf5  \cf8 =\cf5  \cf14 4\cf8 ;\cf5 \cb1 \
\cb3         \cf12 const\cf5  \cf13 NEXT_PIECE_BLOCK_SIZE\cf5  \cf8 =\cf5  \cf14 15\cf8 ;\cf5  \cb1 \
\cb3         \cf12 const\cf5  \cf13 LINES_PER_LEVEL\cf5  \cf8 =\cf5  \cf14 10\cf8 ;\cf5  \cb1 \
\
\cb3         \cf12 let\cf5  playerName \cf8 =\cf5  \cf9 ""\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  playerAge \cf8 =\cf5  \cf9 ""\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  soundEnabled \cf8 =\cf5  \cf12 true\cf8 ;\cf5 \cb1 \
\
\cb3         \cf11 // --- Inicializaci\'f3n de Sonidos con Tone.js ---\cf5 \cb1 \
\cb3         \cf12 let\cf5  moveSound\cf8 ,\cf5  rotateSound\cf8 ,\cf5  landSound\cf8 ,\cf5  lineClearSound\cf8 ,\cf5  levelUpSound\cf8 ,\cf5  gameOverSound\cf8 ;\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  setupSounds\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf12 typeof\cf5  \cf13 Tone\cf5  \cf8 !==\cf5  \cf9 'undefined'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 moveSound \cf8 =\cf5  \cf12 new\cf5  \cf13 Tone\cf8 .\cf13 Synth\cf8 (\{\cf5 \cb1 \
\cb3                     oscillator\cf8 :\cf5  \cf8 \{\cf5  type\cf8 :\cf5  \cf9 'sine'\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     envelope\cf8 :\cf5  \cf8 \{\cf5  attack\cf8 :\cf5  \cf14 0.005\cf8 ,\cf5  decay\cf8 :\cf5  \cf14 0.1\cf8 ,\cf5  sustain\cf8 :\cf5  \cf14 0\cf8 ,\cf5  release\cf8 :\cf5  \cf14 0.1\cf5  \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \}).\cf5 toDestination\cf8 ();\cf5 \cb1 \
\cb3                 rotateSound \cf8 =\cf5  \cf12 new\cf5  \cf13 Tone\cf8 .\cf13 Synth\cf8 (\{\cf5 \cb1 \
\cb3                     oscillator\cf8 :\cf5  \cf8 \{\cf5  type\cf8 :\cf5  \cf9 'triangle'\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     envelope\cf8 :\cf5  \cf8 \{\cf5  attack\cf8 :\cf5  \cf14 0.005\cf8 ,\cf5  decay\cf8 :\cf5  \cf14 0.05\cf8 ,\cf5  sustain\cf8 :\cf5  \cf14 0\cf8 ,\cf5  release\cf8 :\cf5  \cf14 0.1\cf5  \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \}).\cf5 toDestination\cf8 ();\cf5 \cb1 \
\cb3                 landSound \cf8 =\cf5  \cf12 new\cf5  \cf13 Tone\cf8 .\cf13 Synth\cf8 (\{\cf5 \cb1 \
\cb3                     oscillator\cf8 :\cf5  \cf8 \{\cf5  type\cf8 :\cf5  \cf9 'square'\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     envelope\cf8 :\cf5  \cf8 \{\cf5  attack\cf8 :\cf5  \cf14 0.01\cf8 ,\cf5  decay\cf8 :\cf5  \cf14 0.1\cf8 ,\cf5  sustain\cf8 :\cf5  \cf14 0.05\cf8 ,\cf5  release\cf8 :\cf5  \cf14 0.1\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     volume\cf8 :\cf5  \cf8 -\cf14 10\cf5  \cb1 \
\cb3                 \cf8 \}).\cf5 toDestination\cf8 ();\cf5 \cb1 \
\cb3                 lineClearSound \cf8 =\cf5  \cf12 new\cf5  \cf13 Tone\cf8 .\cf13 PolySynth\cf8 (\cf13 Tone\cf8 .\cf13 Synth\cf8 ,\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     oscillator\cf8 :\cf5  \cf8 \{\cf5  type\cf8 :\cf5  \cf9 'sawtooth'\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     envelope\cf8 :\cf5  \cf8 \{\cf5  attack\cf8 :\cf5  \cf14 0.01\cf8 ,\cf5  decay\cf8 :\cf5  \cf14 0.2\cf8 ,\cf5  sustain\cf8 :\cf5  \cf14 0.1\cf8 ,\cf5  release\cf8 :\cf5  \cf14 0.2\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     volume\cf8 :\cf5  \cf8 -\cf14 5\cf5 \cb1 \
\cb3                 \cf8 \}).\cf5 toDestination\cf8 ();\cf5 \cb1 \
\cb3                 levelUpSound \cf8 =\cf5  \cf12 new\cf5  \cf13 Tone\cf8 .\cf13 PolySynth\cf8 (\cf13 Tone\cf8 .\cf13 Synth\cf8 ,\cf5  \cf8 \{\cf5 \cb1 \
\cb3                      envelope\cf8 :\cf5  \cf8 \{\cf5  attack\cf8 :\cf5  \cf14 0.01\cf8 ,\cf5  decay\cf8 :\cf5  \cf14 0.4\cf8 ,\cf5  sustain\cf8 :\cf5  \cf14 0\cf8 ,\cf5  release\cf8 :\cf5  \cf14 0.4\cf5  \cf8 \},\cf5 \cb1 \
\cb3                      volume\cf8 :\cf5  \cf8 -\cf14 3\cf5 \cb1 \
\cb3                 \cf8 \}).\cf5 toDestination\cf8 ();\cf5 \cb1 \
\cb3                 gameOverSound \cf8 =\cf5  \cf12 new\cf5  \cf13 Tone\cf8 .\cf13 Synth\cf8 (\{\cf5 \cb1 \
\cb3                     oscillator\cf8 :\cf5  \cf8 \{\cf5  type\cf8 :\cf5  \cf9 'fatsawtooth'\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     envelope\cf8 :\cf5  \cf8 \{\cf5  attack\cf8 :\cf5  \cf14 0.01\cf8 ,\cf5  decay\cf8 :\cf5  \cf14 0.5\cf8 ,\cf5  sustain\cf8 :\cf5  \cf14 0\cf8 ,\cf5  release\cf8 :\cf5  \cf14 0.5\cf5  \cf8 \},\cf5 \cb1 \
\cb3                     volume\cf8 :\cf5  \cf8 -\cf14 5\cf5 \cb1 \
\cb3                 \cf8 \}).\cf5 toDestination\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 console\cf8 .\cf5 warn\cf8 (\cf9 "Tone.js no est\'e1 cargado. Los sonidos no funcionar\'e1n."\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         setupSounds\cf8 ();\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  playSound\cf8 (\cf5 sound\cf8 ,\cf5  note\cf8 ,\cf5  duration \cf8 =\cf5  \cf9 '8n'\cf8 ,\cf5  time \cf8 =\cf5  \cf13 Tone\cf8 .\cf5 now\cf8 ())\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 soundEnabled \cf8 &&\cf5  sound \cf8 &&\cf5  \cf12 typeof\cf5  sound\cf8 .\cf5 triggerAttackRelease \cf8 ===\cf5  \cf9 'function'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 sound\cf8 .\cf5 triggerAttackRelease\cf8 (\cf5 note\cf8 ,\cf5  duration\cf8 ,\cf5  time\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cf12 function\cf5  playPolySound\cf8 (\cf5 sound\cf8 ,\cf5  notes\cf8 ,\cf5  duration \cf8 =\cf5  \cf9 '8n'\cf8 ,\cf5  time \cf8 =\cf5  \cf13 Tone\cf8 .\cf5 now\cf8 ())\{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 soundEnabled \cf8 &&\cf5  sound \cf8 &&\cf5  \cf12 typeof\cf5  sound\cf8 .\cf5 triggerAttackRelease \cf8 ===\cf5  \cf9 'function'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 sound\cf8 .\cf5 triggerAttackRelease\cf8 (\cf5 notes\cf8 ,\cf5  duration\cf8 ,\cf5  time\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf12 if\cf5  \cf8 (\cf5 canvas \cf8 &&\cf5  nextPieceCanvas\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             canvas\cf8 .\cf5 width \cf8 =\cf5  \cf13 COLS\cf5  \cf8 *\cf5  \cf13 BLOCK_SIZE\cf8 ;\cf5 \cb1 \
\cb3             canvas\cf8 .\cf5 height \cf8 =\cf5  \cf13 ROWS\cf5  \cf8 *\cf5  \cf13 BLOCK_SIZE\cf8 ;\cf5 \cb1 \
\cb3             nextPieceCanvas\cf8 .\cf5 width \cf8 =\cf5  \cf13 NEXT_PIECE_COLS\cf5  \cf8 *\cf5  \cf13 NEXT_PIECE_BLOCK_SIZE\cf8 ;\cf5 \cb1 \
\cb3             nextPieceCanvas\cf8 .\cf5 height \cf8 =\cf5  \cf13 NEXT_PIECE_ROWS\cf5  \cf8 *\cf5  \cf13 NEXT_PIECE_BLOCK_SIZE\cf8 ;\cf5 \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 context \cf8 &&\cf5  nextPieceContext\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 context\cf8 .\cf5 scale\cf8 (\cf13 BLOCK_SIZE\cf8 ,\cf5  \cf13 BLOCK_SIZE\cf8 );\cf5 \cb1 \
\cb3                 nextPieceContext\cf8 .\cf5 scale\cf8 (\cf13 NEXT_PIECE_BLOCK_SIZE\cf8 ,\cf5  \cf13 NEXT_PIECE_BLOCK_SIZE\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 console\cf8 .\cf5 error\cf8 (\cf9 "Error al obtener el contexto 2D de uno de los canvas."\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3             console\cf8 .\cf5 error\cf8 (\cf9 "Error: No se encontraron los elementos canvas del juego."\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf12 let\cf5  board \cf8 =\cf5  createBoard\cf8 (\cf13 COLS\cf8 ,\cf5  \cf13 ROWS\cf8 );\cf5 \cb1 \
\cb3         \cf12 let\cf5  currentPiece\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  nextPiece\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  score \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  level \cf8 =\cf5  \cf14 1\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  linesCleared \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  gameOver \cf8 =\cf5  \cf12 false\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  isPaused \cf8 =\cf5  \cf12 false\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  gameStarted \cf8 =\cf5  \cf12 false\cf8 ;\cf5 \cb1 \
\
\cb3         \cf12 let\cf5  dropCounter \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  dropInterval \cf8 =\cf5  \cf14 1000\cf8 ;\cf5  \cb1 \
\cb3         \cf12 let\cf5  animationFrameId\cf8 ;\cf5 \cb1 \
\cb3         \cf12 let\cf5  lastTime \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\
\cb3         \cf12 const\cf5  pieceBag \cf8 =\cf5  \cf8 [];\cf5  \cb1 \
\
\cb3         \cf12 const\cf5  \cf13 TETROMINOES\cf5  \cf8 =\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf9 'I'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#54C6EB'\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf9 'L'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 0\cf8 ,\cf5  \cf14 0\cf8 ,\cf5  \cf14 1\cf8 ],\cf5  \cf8 [\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#FFA500'\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf9 'J'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 1\cf8 ,\cf5  \cf14 0\cf8 ,\cf5  \cf14 0\cf8 ],\cf5  \cf8 [\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#4169E1'\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf9 'T'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 0\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 0\cf8 ],\cf5  \cf8 [\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#BB86FC'\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf9 'O'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ],\cf5  \cf8 [\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#FFDA63'\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf9 'S'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 0\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ],\cf5  \cf8 [\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 0\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#90EE90'\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf9 'Z'\cf8 :\cf5  \cf8 \{\cf5  shape\cf8 :\cf5  \cf8 [[\cf14 1\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 0\cf8 ],\cf5  \cf8 [\cf14 0\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 '#FF7F50'\cf5  \cf8 \}\cf5   \cb1 \
\cb3         \cf8 \};\cf5 \cb1 \
\cb3         \cf12 const\cf5  \cf13 PIECE_KEYS\cf5  \cf8 =\cf5  \cf13 Object\cf8 .\cf5 keys\cf8 (\cf13 TETROMINOES\cf8 );\cf5 \cb1 \
\
\cb3         \cf12 const\cf5  \cf13 ANIMALS\cf5  \cf8 =\cf5  \cf8 [\cf5 \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Conejo"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/conejo.png"\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Ardilla"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/ardilla.png"\cf5  \cf8 \},\cf5 \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Perezoso"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/perezoso.png"\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Perro"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/perro.png"\cf5  \cf8 \},\cf5 \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Mono"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/mono.png"\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Lobo"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/lobo.png"\cf5  \cf8 \},\cf5 \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Serpiente"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/serpiente.png"\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Tigre"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/tigre.png"\cf5  \cf8 \},\cf5 \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Hipop\'f3tamo"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/hipopotamo.png"\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Rinoceronte"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/rinoceronte.png"\cf5  \cf8 \},\cf5 \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Elefante"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/elefante.png"\cf5  \cf8 \},\cf5  \cb1 \
\cb3             \cf8 \{\cf5  name\cf8 :\cf5  \cf9 "Le\'f3n"\cf8 ,\cf5  imageName\cf8 :\cf5  \cf9 "imagenes/leon.png"\cf5  \cf8 \}\cf5 \cb1 \
\cb3         \cf8 ];\cf5 \cb1 \
\
\cb3         \cf11 // --- Funciones de Interfaz y Estado del Juego ---\cf5 \cb1 \
\cb3         \cf12 function\cf5  showPlayerInfoMenu\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 playerInfoMenu\cf8 )\cf5  playerInfoMenu\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'flex'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 levelSelectionMenu\cf8 )\cf5  levelSelectionMenu\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 gameContainer\cf8 )\cf5  gameContainer\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 controlsDiv\cf8 )\cf5  controlsDiv\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 messagesDiv\cf8 )\cf5  messagesDiv\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'block'\cf8 ;\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Ingresa tus datos para comenzar"\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf12 function\cf5  showLevelSelectionMenu\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 playerInfoMenu\cf8 )\cf5  playerInfoMenu\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 levelSelectionMenu\cf8 )\cf5  levelSelectionMenu\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'flex'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 gameContainer\cf8 )\cf5  gameContainer\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 controlsDiv\cf8 )\cf5  controlsDiv\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 messagesDiv\cf8 )\cf5  messagesDiv\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'block'\cf8 ;\cf5   \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "\'a1Elige un nivel para comenzar!"\cf8 ;\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 mainActionButton\cf8 )\cf5  mainActionButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Volver al Men\'fa"\cf8 ;\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 pauseButton\cf8 )\cf5  pauseButton\cf8 .\cf5 disabled \cf8 =\cf5  \cf12 true\cf8 ;\cf5 \cb1 \
\cb3             \cb1 \
\cb3             gameStarted \cf8 =\cf5  \cf12 false\cf8 ;\cf5 \cb1 \
\cb3             gameOver \cf8 =\cf5  \cf12 true\cf8 ;\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 animationFrameId\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 cancelAnimationFrame\cf8 (\cf5 animationFrameId\cf8 );\cf5 \cb1 \
\cb3                 animationFrameId \cf8 =\cf5  \cf12 null\cf8 ;\cf5  \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             populateLevelSelectionMenu\cf8 ();\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  populateLevelSelectionMenu\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 levelGridContainer\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 console\cf8 .\cf5 error\cf8 (\cf9 "Error: El contenedor de la cuadr\'edcula de niveles no se encontr\'f3."\cf8 );\cf5 \cb1 \
\cb3                 \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             levelGridContainer\cf8 .\cf5 innerHTML \cf8 =\cf5  \cf9 ''\cf8 ;\cf5  \cb1 \
\cb3             \cf13 ANIMALS\cf8 .\cf5 forEach\cf8 ((\cf5 animal\cf8 ,\cf5  index\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 const\cf5  itemContainer \cf8 =\cf5  document\cf8 .\cf5 createElement\cf8 (\cf9 'div'\cf8 );\cf5 \cb1 \
\cb3                 itemContainer\cf8 .\cf5 classList\cf8 .\cf5 add\cf8 (\cf9 'level-item-container'\cf8 );\cf5 \cb1 \
\
\cb3                 \cf12 const\cf5  card \cf8 =\cf5  document\cf8 .\cf5 createElement\cf8 (\cf9 'div'\cf8 );\cf5 \cb1 \
\cb3                 card\cf8 .\cf5 classList\cf8 .\cf5 add\cf8 (\cf9 'level-card'\cf8 );\cf5 \cb1 \
\cb3                 card\cf8 .\cf5 dataset\cf8 .\cf5 level \cf8 =\cf5  index \cf8 +\cf5  \cf14 1\cf8 ;\cf5  \cb1 \
\
\cb3                 \cf12 const\cf5  img \cf8 =\cf5  document\cf8 .\cf5 createElement\cf8 (\cf9 'img'\cf8 );\cf5 \cb1 \
\cb3                 img\cf8 .\cf5 src \cf8 =\cf5  animal\cf8 .\cf5 imageName\cf8 ;\cf5  \cb1 \
\cb3                 img\cf8 .\cf5 alt \cf8 =\cf5  animal\cf8 .\cf5 name\cf8 ;\cf5  \cb1 \
\cb3                 img\cf8 .\cf5 classList\cf8 .\cf5 add\cf8 (\cf9 'level-card-animal-image'\cf8 );\cf5  \cb1 \
\cb3                 card\cf8 .\cf5 appendChild\cf8 (\cf5 img\cf8 );\cf5  \cb1 \
\
\cb3                 \cf12 const\cf5  numberDisplay \cf8 =\cf5  document\cf8 .\cf5 createElement\cf8 (\cf9 'div'\cf8 );\cf5 \cb1 \
\cb3                 numberDisplay\cf8 .\cf5 classList\cf8 .\cf5 add\cf8 (\cf9 'level-number-display'\cf8 );\cf5 \cb1 \
\cb3                 numberDisplay\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 `Nivel \cf8 $\{\cf5 index \cf8 +\cf5  \cf14 1\cf8 \}\cf9 `\cf8 ;\cf5 \cb1 \
\
\cb3                 itemContainer\cf8 .\cf5 appendChild\cf8 (\cf5 card\cf8 );\cf5 \cb1 \
\cb3                 itemContainer\cf8 .\cf5 appendChild\cf8 (\cf5 numberDisplay\cf8 );\cf5 \cb1 \
\
\cb3                 card\cf8 .\cf5 addEventListener\cf8 (\cf9 'click'\cf8 ,\cf5  \cf8 ()\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf11 // console.log("Tarjeta de nivel clickeada. Nivel:", card.dataset.level); \cf5 \cb1 \
\cb3                     \cf12 const\cf5  selectedLevel \cf8 =\cf5  parseInt\cf8 (\cf5 card\cf8 .\cf5 dataset\cf8 .\cf5 level\cf8 );\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 isNaN\cf8 (\cf5 selectedLevel\cf8 ))\cf5  \cf8 \{\cf5 \cb1 \
\cb3                         console\cf8 .\cf5 error\cf8 (\cf9 "Error: Nivel seleccionado no es un n\'famero."\cf8 ,\cf5  card\cf8 .\cf5 dataset\cf8 .\cf5 level\cf8 );\cf5 \cb1 \
\cb3                         \cf12 return\cf8 ;\cf5 \cb1 \
\cb3                     \cf8 \}\cf5 \cb1 \
\cb3                     level \cf8 =\cf5  selectedLevel\cf8 ;\cf5 \cb1 \
\cb3                     linesCleared \cf8 =\cf5  \cf8 (\cf5 selectedLevel \cf8 -\cf5  \cf14 1\cf8 )\cf5  \cf8 *\cf5  \cf13 LINES_PER_LEVEL\cf8 ;\cf5  \cb1 \
\cb3                     \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 levelSelectionMenu\cf8 )\cf5  levelSelectionMenu\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'none'\cf8 ;\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 gameContainer\cf8 )\cf5  gameContainer\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'flex'\cf8 ;\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 controlsDiv\cf8 )\cf5  controlsDiv\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'flex'\cf8 ;\cf5  \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 messagesDiv\cf8 )\cf5  messagesDiv\cf8 .\cf5 style\cf8 .\cf5 display \cf8 =\cf5  \cf9 'block'\cf8 ;\cf5  \cb1 \
\
\cb3                     startGame\cf8 ();\cf5 \cb1 \
\cb3                 \cf8 \});\cf5 \cb1 \
\cb3                 levelGridContainer\cf8 .\cf5 appendChild\cf8 (\cf5 itemContainer\cf8 );\cf5  \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  startGame\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf11 // console.log("Iniciando startGame(). Nivel seleccionado:", level); \cf5 \cb1 \
\cb3             board \cf8 =\cf5  createBoard\cf8 (\cf13 COLS\cf8 ,\cf5  \cf13 ROWS\cf8 );\cf5 \cb1 \
\cb3             score \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3             isPaused \cf8 =\cf5  \cf12 false\cf8 ;\cf5 \cb1 \
\cb3             pieceBag\cf8 .\cf5 length \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3             \cb1 \
\cb3             gameOver \cf8 =\cf5  \cf12 false\cf8 ;\cf5  \cb1 \
\cb3             \cb1 \
\cb3             updateScore\cf8 (\cf14 0\cf8 );\cf5 \cb1 \
\cb3             updateLevel\cf8 ();\cf5     \cb1 \
\cb3             resetPiece\cf8 ();\cf5      \cb1 \
\
\cb3             draw\cf8 ();\cf5            \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 gameOver\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 gameStarted \cf8 =\cf5  \cf12 false\cf8 ;\cf5  \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "\'a1Juego Terminado! Puntuaci\'f3n: "\cf5  \cf8 +\cf5  score\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 mainActionButton\cf8 )\cf5  mainActionButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Elegir Nivel"\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 pauseButton\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     pauseButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Pausar"\cf8 ;\cf5 \cb1 \
\cb3                     pauseButton\cf8 .\cf5 disabled \cf8 =\cf5  \cf12 true\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3                 playSound\cf8 (\cf5 gameOverSound\cf8 ,\cf5  \cf9 'C3'\cf8 ,\cf5  \cf9 '1n'\cf8 );\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 animationFrameId\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                     cancelAnimationFrame\cf8 (\cf5 animationFrameId\cf8 );\cf5 \cb1 \
\cb3                     animationFrameId \cf8 =\cf5  \cf12 null\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 gameStarted \cf8 =\cf5  \cf12 true\cf8 ;\cf5  \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 ""\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 mainActionButton\cf8 )\cf5  mainActionButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Volver al Men\'fa"\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 pauseButton\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     pauseButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Pausar"\cf8 ;\cf5 \cb1 \
\cb3                     pauseButton\cf8 .\cf5 disabled \cf8 =\cf5  \cf12 false\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 animationFrameId\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                     cancelAnimationFrame\cf8 (\cf5 animationFrameId\cf8 );\cf5 \cb1 \
\cb3                     animationFrameId \cf8 =\cf5  \cf12 null\cf8 ;\cf5  \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3                 lastTime \cf8 =\cf5  performance\cf8 .\cf5 now\cf8 ();\cf5 \cb1 \
\cb3                 dropCounter \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3                 animationFrameId \cf8 =\cf5  requestAnimationFrame\cf8 (\cf5 gameLoop\cf8 );\cf5 \cb1 \
\cb3                 \cf11 // console.log("Nuevo gameLoop solicitado. ID:", animationFrameId); \cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf11 // --- Funciones del Juego (L\'f3gica de Tetris) ---\cf5 \cb1 \
\cb3         \cf12 function\cf5  createBoard\cf8 (\cf5 cols\cf8 ,\cf5  rows\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 const\cf5  matrix \cf8 =\cf5  \cf8 [];\cf5 \cb1 \
\cb3             \cf12 while\cf5  \cf8 (\cf5 rows\cf8 --)\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 matrix\cf8 .\cf5 push\cf8 (\cf12 new\cf5  \cf13 Array\cf8 (\cf5 cols\cf8 ).\cf5 fill\cf8 (\cf14 0\cf8 ));\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             \cf12 return\cf5  matrix\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  drawBoard\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 context\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             board\cf8 .\cf5 forEach\cf8 ((\cf5 row\cf8 ,\cf5  y\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 row\cf8 .\cf5 forEach\cf8 ((\cf5 value\cf8 ,\cf5  x\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 value \cf8 !==\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                         context\cf8 .\cf5 fillStyle \cf8 =\cf5  value\cf8 ;\cf5  \cb1 \
\cb3                         context\cf8 .\cf5 fillRect\cf8 (\cf5 x\cf8 ,\cf5  y\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 );\cf5 \cb1 \
\cb3                         context\cf8 .\cf5 strokeStyle \cf8 =\cf5  \cf9 'rgba(0, 0, 0, 0.15)'\cf8 ;\cf5  \cb1 \
\cb3                         context\cf8 .\cf5 lineWidth \cf8 =\cf5  \cf14 0.08\cf8 ;\cf5 \cb1 \
\cb3                         context\cf8 .\cf5 strokeRect\cf8 (\cf5 x\cf8 ,\cf5  y\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 );\cf5 \cb1 \
\cb3                     \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \});\cf5 \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  drawMatrix\cf8 (\cf5 matrix\cf8 ,\cf5  offset\cf8 ,\cf5  ctxToUse\cf8 ,\cf5  pieceColor\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 ctxToUse\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             matrix\cf8 .\cf5 forEach\cf8 ((\cf5 row\cf8 ,\cf5  y\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 row\cf8 .\cf5 forEach\cf8 ((\cf5 value\cf8 ,\cf5  x\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 value \cf8 !==\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                         ctxToUse\cf8 .\cf5 fillStyle \cf8 =\cf5  pieceColor\cf8 ;\cf5 \cb1 \
\cb3                         ctxToUse\cf8 .\cf5 fillRect\cf8 (\cf5 x \cf8 +\cf5  offset\cf8 .\cf5 x\cf8 ,\cf5  y \cf8 +\cf5  offset\cf8 .\cf5 y\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 );\cf5 \cb1 \
\cb3                         ctxToUse\cf8 .\cf5 strokeStyle \cf8 =\cf5  \cf9 'rgba(255, 255, 255, 0.4)'\cf8 ;\cf5  \cb1 \
\cb3                         ctxToUse\cf8 .\cf5 lineWidth \cf8 =\cf5  \cf14 0.12\cf8 ;\cf5 \cb1 \
\cb3                         ctxToUse\cf8 .\cf5 strokeRect\cf8 (\cf5 x \cf8 +\cf5  offset\cf8 .\cf5 x\cf8 ,\cf5  y \cf8 +\cf5  offset\cf8 .\cf5 y\cf8 ,\cf5  \cf14 1\cf8 ,\cf5  \cf14 1\cf8 );\cf5 \cb1 \
\cb3                     \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \});\cf5 \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf12 function\cf5  refillBag\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 const\cf5  tempBag \cf8 =\cf5  \cf8 [...\cf13 PIECE_KEYS\cf8 ];\cf5 \cb1 \
\cb3             \cf12 while\cf5  \cf8 (\cf5 tempBag\cf8 .\cf5 length\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 const\cf5  randomIndex \cf8 =\cf5  \cf13 Math\cf8 .\cf5 floor\cf8 (\cf13 Math\cf8 .\cf5 random\cf8 ()\cf5  \cf8 *\cf5  tempBag\cf8 .\cf5 length\cf8 );\cf5 \cb1 \
\cb3                 pieceBag\cf8 .\cf5 push\cf8 (\cf5 tempBag\cf8 .\cf5 splice\cf8 (\cf5 randomIndex\cf8 ,\cf5  \cf14 1\cf8 )[\cf14 0\cf8 ]);\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  resetPiece\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 pieceBag\cf8 .\cf5 length \cf8 ===\cf5  \cf14 0\cf8 )\cf5  refillBag\cf8 ();\cf5 \cb1 \
\cb3             \cf12 const\cf5  type \cf8 =\cf5  pieceBag\cf8 .\cf5 pop\cf8 ();\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf13 TETROMINOES\cf8 [\cf5 type\cf8 ])\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 console\cf8 .\cf5 error\cf8 (\cf9 "Error: Tipo de pieza desconocido:"\cf8 ,\cf5  type\cf8 );\cf5 \cb1 \
\cb3                 gameOver \cf8 =\cf5  \cf12 true\cf8 ;\cf5  \cb1 \
\cb3                 \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             \cf12 const\cf5  pieceDetails \cf8 =\cf5  \cf13 TETROMINOES\cf8 [\cf5 type\cf8 ];\cf5 \cb1 \
\cb3             currentPiece \cf8 =\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 pos\cf8 :\cf5  \cf8 \{\cf5  x\cf8 :\cf5  \cf13 Math\cf8 .\cf5 floor\cf8 (\cf13 COLS\cf5  \cf8 /\cf5  \cf14 2\cf8 )\cf5  \cf8 -\cf5  \cf13 Math\cf8 .\cf5 floor\cf8 (\cf5 pieceDetails\cf8 .\cf5 shape\cf8 [\cf14 0\cf8 ].\cf5 length \cf8 /\cf5  \cf14 2\cf8 ),\cf5  y\cf8 :\cf5  \cf14 0\cf5  \cf8 \},\cf5 \cb1 \
\cb3                 matrix\cf8 :\cf5  pieceDetails\cf8 .\cf5 shape\cf8 ,\cf5 \cb1 \
\cb3                 color\cf8 :\cf5  pieceDetails\cf8 .\cf5 color\cb1 \
\cb3             \cf8 \};\cf5 \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 pieceBag\cf8 .\cf5 length \cf8 ===\cf5  \cf14 0\cf8 )\cf5  refillBag\cf8 ();\cf5 \cb1 \
\cb3             \cf12 const\cf5  nextType \cf8 =\cf5  pieceBag\cf8 [\cf5 pieceBag\cf8 .\cf5 length \cf8 -\cf14 1\cf8 ];\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf13 TETROMINOES\cf8 [\cf5 nextType\cf8 ])\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 console\cf8 .\cf5 error\cf8 (\cf9 "Error: Tipo de pieza siguiente desconocido:"\cf8 ,\cf5  nextType\cf8 );\cf5 \cb1 \
\cb3                 nextPiece \cf8 =\cf5  \cf8 \{\cf5 matrix\cf8 :\cf5  \cf8 [[\cf14 0\cf8 ]],\cf5  color\cf8 :\cf5  \cf9 'gray'\cf8 \};\cf5  \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 const\cf5  nextPieceDetails \cf8 =\cf5  \cf13 TETROMINOES\cf8 [\cf5 nextType\cf8 ];\cf5 \cb1 \
\cb3                 nextPiece \cf8 =\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     matrix\cf8 :\cf5  nextPieceDetails\cf8 .\cf5 shape\cf8 ,\cf5 \cb1 \
\cb3                     color\cf8 :\cf5  nextPieceDetails\cf8 .\cf5 color\cb1 \
\cb3                 \cf8 \};\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 checkCollision\cf8 (\cf5 board\cf8 ,\cf5  currentPiece\cf8 ))\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 gameOver \cf8 =\cf5  \cf12 true\cf8 ;\cf5  \cb1 \
\cb3                 playSound\cf8 (\cf5 gameOverSound\cf8 ,\cf5  \cf9 'C3'\cf8 ,\cf5  \cf9 '1n'\cf8 );\cf5 \cb1 \
\cb3                 \cf12 if\cf8 (\cf5 animationFrameId\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                     cancelAnimationFrame\cf8 (\cf5 animationFrameId\cf8 );\cf5 \cb1 \
\cb3                     animationFrameId \cf8 =\cf5  \cf12 null\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  pieceDrop\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 isPaused \cf8 ||\cf5  gameOver \cf8 ||\cf5  \cf8 !\cf5 gameStarted \cf8 ||\cf5  \cf8 !\cf5 currentPiece\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y\cf8 ++;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 checkCollision\cf8 (\cf5 board\cf8 ,\cf5  currentPiece\cf8 ))\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y\cf8 --;\cf5  \cb1 \
\cb3                 mergePieceToBoard\cf8 ();\cf5  \cb1 \
\cb3                 playSound\cf8 (\cf5 landSound\cf8 ,\cf5  \cf9 'C2'\cf8 ,\cf5  \cf9 '16n'\cf8 );\cf5 \cb1 \
\cb3                 clearFullLines\cf8 ();\cf5     \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (!\cf5 gameOver\cf8 )\cf5  resetPiece\cf8 ();\cf5  \cb1 \
\cb3                 updateScore\cf8 (\cf14 0\cf8 );\cf5       \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             dropCounter \cf8 =\cf5  \cf14 0\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  pieceMove\cf8 (\cf5 direction\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 isPaused \cf8 ||\cf5  gameOver \cf8 ||\cf5  \cf8 !\cf5 gameStarted \cf8 ||\cf5  \cf8 !\cf5 currentPiece\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x \cf8 +=\cf5  direction\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 checkCollision\cf8 (\cf5 board\cf8 ,\cf5  currentPiece\cf8 ))\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x \cf8 -=\cf5  direction\cf8 ;\cf5  \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 playSound\cf8 (\cf5 moveSound\cf8 ,\cf5  \cf9 'C4'\cf8 ,\cf5  \cf9 '32n'\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  pieceRotate\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 isPaused \cf8 ||\cf5  gameOver \cf8 ||\cf5  \cf8 !\cf5 gameStarted \cf8 ||\cf5  \cf8 !\cf5 currentPiece\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             \cf12 const\cf5  originalMatrix \cf8 =\cf5  currentPiece\cf8 .\cf5 matrix\cf8 ;\cf5 \cb1 \
\cb3             \cf12 const\cf5  rotated \cf8 =\cf5  rotateMatrix\cf8 (\cf5 currentPiece\cf8 .\cf5 matrix\cf8 );\cf5 \cb1 \
\cb3             currentPiece\cf8 .\cf5 matrix \cf8 =\cf5  rotated\cf8 ;\cf5 \cb1 \
\
\cb3             \cf12 let\cf5  offset \cf8 =\cf5  \cf14 1\cf8 ;\cf5 \cb1 \
\cb3             \cf12 while\cf5  \cf8 (\cf5 checkCollision\cf8 (\cf5 board\cf8 ,\cf5  currentPiece\cf8 ))\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x \cf8 +=\cf5  offset\cf8 ;\cf5 \cb1 \
\cb3                 offset \cf8 =\cf5  \cf8 -(\cf5 offset \cf8 +\cf5  \cf8 (\cf5 offset \cf8 >\cf5  \cf14 0\cf5  \cf8 ?\cf5  \cf14 1\cf5  \cf8 :\cf5  \cf8 -\cf14 1\cf8 ));\cf5  \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf13 Math\cf8 .\cf5 abs\cf8 (\cf5 offset\cf8 )\cf5  \cf8 >\cf5  currentPiece\cf8 .\cf5 matrix\cf8 [\cf14 0\cf8 ].\cf5 length \cf8 +\cf5  \cf14 1\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                     currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x \cf8 -=\cf5  \cf8 (\cf5 offset \cf8 -\cf5  \cf8 (\cf5 offset \cf8 >\cf5  \cf14 0\cf5  \cf8 ?\cf5  \cf8 -\cf14 1\cf5  \cf8 :\cf5  \cf14 1\cf8 ))\cf5  \cf8 /\cf14 2\cf5  \cf8 ;\cf5  \cb1 \
\cb3                     currentPiece\cf8 .\cf5 matrix \cf8 =\cf5  originalMatrix\cf8 ;\cf5  \cb1 \
\cb3                     \cf12 return\cf8 ;\cf5  \cf11 // No se pudo rotar\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             playSound\cf8 (\cf5 rotateSound\cf8 ,\cf5  \cf9 'E4'\cf8 ,\cf5  \cf9 '16n'\cf8 );\cf5  \cf11 // Sonido si la rotaci\'f3n es exitosa\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  rotateMatrix\cf8 (\cf5 matrix\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 const\cf5  rows \cf8 =\cf5  matrix\cf8 .\cf5 length\cf8 ;\cf5 \cb1 \
\cb3             \cf12 const\cf5  cols \cf8 =\cf5  matrix\cf8 [\cf14 0\cf8 ].\cf5 length\cf8 ;\cf5 \cb1 \
\cb3             \cf12 const\cf5  newMatrix \cf8 =\cf5  \cf8 [];\cf5 \cb1 \
\cb3             \cf12 for\cf5  \cf8 (\cf12 let\cf5  y \cf8 =\cf5  \cf14 0\cf8 ;\cf5  y \cf8 <\cf5  cols\cf8 ;\cf5  y\cf8 ++)\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 newMatrix\cf8 [\cf5 y\cf8 ]\cf5  \cf8 =\cf5  \cf8 [];\cf5 \cb1 \
\cb3                 \cf12 for\cf5  \cf8 (\cf12 let\cf5  x \cf8 =\cf5  \cf14 0\cf8 ;\cf5  x \cf8 <\cf5  rows\cf8 ;\cf5  x\cf8 ++)\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     newMatrix\cf8 [\cf5 y\cf8 ][\cf5 x\cf8 ]\cf5  \cf8 =\cf5  matrix\cf8 [\cf5 rows \cf8 -\cf5  \cf14 1\cf5  \cf8 -\cf5  x\cf8 ][\cf5 y\cf8 ];\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             \cf12 return\cf5  newMatrix\cf8 ;\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  checkCollision\cf8 (\cf5 boardToCheck\cf8 ,\cf5  pieceToCheck\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 pieceToCheck \cf8 ||\cf5  \cf8 !\cf5 pieceToCheck\cf8 .\cf5 matrix\cf8 )\cf5  \cf12 return\cf5  \cf12 true\cf8 ;\cf5  \cb1 \
\cb3             \cf12 const\cf5  \cf8 \{\cf5  matrix\cf8 ,\cf5  pos \cf8 \}\cf5  \cf8 =\cf5  pieceToCheck\cf8 ;\cf5 \cb1 \
\cb3             \cf12 for\cf5  \cf8 (\cf12 let\cf5  y_matrix \cf8 =\cf5  \cf14 0\cf8 ;\cf5  y_matrix \cf8 <\cf5  matrix\cf8 .\cf5 length\cf8 ;\cf5  y_matrix\cf8 ++)\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 \cf12 for\cf5  \cf8 (\cf12 let\cf5  x_matrix \cf8 =\cf5  \cf14 0\cf8 ;\cf5  x_matrix \cf8 <\cf5  matrix\cf8 [\cf5 y_matrix\cf8 ].\cf5 length\cf8 ;\cf5  x_matrix\cf8 ++)\cf5  \cf8 \{\cf5  \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 matrix\cf8 [\cf5 y_matrix\cf8 ][\cf5 x_matrix\cf8 ]\cf5  \cf8 !==\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                         \cf12 const\cf5  boardX \cf8 =\cf5  x_matrix \cf8 +\cf5  pos\cf8 .\cf5 x\cf8 ;\cf5  \cb1 \
\cb3                         \cf12 const\cf5  boardY \cf8 =\cf5  y_matrix \cf8 +\cf5  pos\cf8 .\cf5 y\cf8 ;\cf5  \cb1 \
\
\cb3                         \cf12 if\cf5  \cf8 (\cf5 boardX \cf8 <\cf5  \cf14 0\cf5  \cf8 ||\cf5  boardX \cf8 >=\cf5  \cf13 COLS\cf5  \cf8 ||\cf5  boardY \cf8 >=\cf5  \cf13 ROWS\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                             \cf12 return\cf5  \cf12 true\cf8 ;\cf5 \cb1 \
\cb3                         \cf8 \}\cf5 \cb1 \
\cb3                         \cf12 if\cf5  \cf8 (\cf5 boardY \cf8 >=\cf5  \cf14 0\cf5  \cf8 &&\cf5  \cb1 \
\cb3                             boardToCheck\cf8 [\cf5 boardY\cf8 ]\cf5  \cf8 &&\cf5  \cb1 \
\cb3                             boardToCheck\cf8 [\cf5 boardY\cf8 ][\cf5 boardX\cf8 ]\cf5  \cf8 !==\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                             \cf12 return\cf5  \cf12 true\cf8 ;\cf5 \cb1 \
\cb3                         \cf8 \}\cf5 \cb1 \
\cb3                     \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             \cf12 return\cf5  \cf12 false\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  mergePieceToBoard\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 currentPiece\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             currentPiece\cf8 .\cf5 matrix\cf8 .\cf5 forEach\cf8 ((\cf5 row\cf8 ,\cf5  y\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 row\cf8 .\cf5 forEach\cf8 ((\cf5 value\cf8 ,\cf5  x\cf8 )\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 value \cf8 !==\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                          \cf12 if\cf5  \cf8 (\cf5 y \cf8 +\cf5  currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y \cf8 >=\cf14 0\cf5  \cf8 &&\cf5  y \cf8 +\cf5  currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y \cf8 <\cf5  \cf13 ROWS\cf5  \cf8 &&\cf5 \cb1 \
\cb3                              x \cf8 +\cf5  currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x \cf8 >=\cf14 0\cf5  \cf8 &&\cf5  x \cf8 +\cf5  currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x \cf8 <\cf5  \cf13 COLS\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                             board\cf8 [\cf5 y \cf8 +\cf5  currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y\cf8 ][\cf5 x \cf8 +\cf5  currentPiece\cf8 .\cf5 pos\cf8 .\cf5 x\cf8 ]\cf5  \cf8 =\cf5  currentPiece\cf8 .\cf5 color\cf8 ;\cf5 \cb1 \
\cb3                          \cf8 \}\cf5 \cb1 \
\cb3                     \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \});\cf5 \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  clearFullLines\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 let\cf5  linesRemovedThisTurn \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3             outer\cf8 :\cf5  \cf12 for\cf5  \cf8 (\cf12 let\cf5  y \cf8 =\cf5  \cf13 ROWS\cf5  \cf8 -\cf5  \cf14 1\cf8 ;\cf5  y \cf8 >=\cf5  \cf14 0\cf8 ;\cf5  y\cf8 --)\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 for\cf5  \cf8 (\cf12 let\cf5  x \cf8 =\cf5  \cf14 0\cf8 ;\cf5  x \cf8 <\cf5  \cf13 COLS\cf8 ;\cf5  x\cf8 ++)\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 board\cf8 [\cf5 y\cf8 ][\cf5 x\cf8 ]\cf5  \cf8 ===\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                         \cf12 continue\cf5  outer\cf8 ;\cf5  \cb1 \
\cb3                     \cf8 \}\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3                 \cf12 const\cf5  row \cf8 =\cf5  board\cf8 .\cf5 splice\cf8 (\cf5 y\cf8 ,\cf5  \cf14 1\cf8 )[\cf14 0\cf8 ].\cf5 fill\cf8 (\cf14 0\cf8 );\cf5  \cb1 \
\cb3                 board\cf8 .\cf5 unshift\cf8 (\cf5 row\cf8 );\cf5  \cb1 \
\cb3                 y\cf8 ++;\cf5  \cb1 \
\cb3                 linesRemovedThisTurn\cf8 ++;\cf5 \cb1 \
\cb3                 linesCleared\cf8 ++;\cf5  \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 linesRemovedThisTurn \cf8 >\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 playPolySound\cf8 (\cf5 lineClearSound\cf8 ,\cf5  \cf8 [\cf9 'C4'\cf8 ,\cf5  \cf9 'E4'\cf8 ,\cf5  \cf9 'G4'\cf8 ],\cf5  \cf9 '4n'\cf8 );\cf5 \cb1 \
\cb3                 updateScore\cf8 (\cf5 linesRemovedThisTurn\cf8 );\cf5 \cb1 \
\cb3                 updateLevel\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  updateScore\cf8 (\cf5 lines\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 let\cf5  points \cf8 =\cf5  \cf14 0\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 lines \cf8 ===\cf5  \cf14 1\cf8 )\cf5  points \cf8 =\cf5  \cf14 40\cf5  \cf8 *\cf5  level\cf8 ;\cf5 \cb1 \
\cb3             \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 lines \cf8 ===\cf5  \cf14 2\cf8 )\cf5  points \cf8 =\cf5  \cf14 100\cf5  \cf8 *\cf5  level\cf8 ;\cf5 \cb1 \
\cb3             \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 lines \cf8 ===\cf5  \cf14 3\cf8 )\cf5  points \cf8 =\cf5  \cf14 300\cf5  \cf8 *\cf5  level\cf8 ;\cf5 \cb1 \
\cb3             \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 lines \cf8 >=\cf5  \cf14 4\cf8 )\cf5  points \cf8 =\cf5  \cf14 1200\cf5  \cf8 *\cf5  level\cf8 ;\cf5  \cb1 \
\cb3             \cb1 \
\cb3             score \cf8 +=\cf5  points\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 scoreDisplay\cf8 )\cf5  scoreDisplay\cf8 .\cf5 textContent \cf8 =\cf5  score\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 linesDisplay\cf8 )\cf5  linesDisplay\cf8 .\cf5 textContent \cf8 =\cf5  linesCleared\cf8 ;\cf5  \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  updateLevel\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 const\cf5  oldLevel \cf8 =\cf5  level\cf8 ;\cf5 \cb1 \
\cb3             \cf12 const\cf5  calculatedLevel \cf8 =\cf5  \cf13 Math\cf8 .\cf5 floor\cf8 (\cf5 linesCleared \cf8 /\cf5  \cf13 LINES_PER_LEVEL\cf8 )\cf5  \cf8 +\cf5  \cf14 1\cf8 ;\cf5 \cb1 \
\cb3             \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 gameStarted \cf8 &&\cf5  calculatedLevel \cf8 >\cf5  level \cf8 &&\cf5  level \cf8 <\cf5  \cf14 12\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 level \cf8 =\cf5  calculatedLevel\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 `\'a1Nivel \cf8 $\{\cf5 level\cf8 \}\cf9 !`\cf8 ;\cf5 \cb1 \
\cb3                 playPolySound\cf8 (\cf5 levelUpSound\cf8 ,\cf5  \cf8 [\cf9 'C5'\cf8 ,\cf5  \cf9 'E5'\cf8 ,\cf5  \cf9 'G5'\cf8 ,\cf5  \cf9 'C6'\cf8 ],\cf5  \cf9 '2n'\cf8 );\cf5 \cb1 \
\cb3                 setTimeout\cf8 (()\cf5  \cf8 =>\cf5  \cf8 \{\cf5  \cf12 if\cf8 (\cf5 messageArea \cf8 &&\cf5  \cf8 !\cf5 gameOver \cf8 &&\cf5  gameStarted \cf8 &&\cf5  \cf8 !\cf5 isPaused\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 ""\cf8 ;\},\cf5  \cf14 2000\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 level \cf8 >\cf5  \cf14 12\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 level \cf8 =\cf5  \cf14 12\cf8 ;\cf5  \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 levelDisplay\cf8 )\cf5  levelDisplay\cf8 .\cf5 textContent \cf8 =\cf5  level\cf8 ;\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 levelTextUnderAnimal\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 levelTextUnderAnimal\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 `Nivel \cf8 $\{\cf5 level\cf8 \}\cf9 `\cf8 ;\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3             dropInterval \cf8 =\cf5  \cf13 Math\cf8 .\cf5 max\cf8 (\cf14 1000\cf5  \cf8 -\cf5  \cf8 ((\cf5 level \cf8 -\cf5  \cf14 1\cf8 )\cf5  \cf8 *\cf5  \cf14 75\cf8 ),\cf5  \cf14 150\cf8 );\cf5  \cb1 \
\cb3             updateAnimalDisplay\cf8 ();\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf12 function\cf5  updateAnimalDisplay\cf8 ()\cf5  \cf8 \{\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 animalImageElement\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             \cf12 const\cf5  currentAnimal \cf8 =\cf5  \cf13 ANIMALS\cf8 [\cf13 Math\cf8 .\cf5 min\cf8 (\cf5 level \cf8 -\cf5  \cf14 1\cf8 ,\cf5  \cf13 ANIMALS\cf8 .\cf5 length \cf8 -\cf5  \cf14 1\cf8 )];\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 currentAnimal\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 animalImageElement\cf8 .\cf5 src \cf8 =\cf5  currentAnimal\cf8 .\cf5 imageName\cf8 ;\cf5  \cb1 \
\cb3                 animalImageElement\cf8 .\cf5 alt \cf8 =\cf5  currentAnimal\cf8 .\cf5 name\cf8 ;\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  draw\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 context \cf8 ||\cf5  \cf8 !\cf5 nextPieceContext\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\
\cb3             \cf12 const\cf5  mainCanvasBg \cf8 =\cf5  getComputedStyle\cf8 (\cf5 canvas\cf8 ).\cf5 backgroundColor\cf8 ;\cf5 \cb1 \
\cb3             context\cf8 .\cf5 fillStyle \cf8 =\cf5  mainCanvasBg\cf8 ;\cf5  \cb1 \
\cb3             context\cf8 .\cf5 fillRect\cf8 (\cf14 0\cf8 ,\cf5  \cf14 0\cf8 ,\cf5  canvas\cf8 .\cf5 width \cf8 /\cf5  \cf13 BLOCK_SIZE\cf8 ,\cf5  canvas\cf8 .\cf5 height \cf8 /\cf5  \cf13 BLOCK_SIZE\cf8 );\cf5  \cb1 \
\
\cb3             drawBoard\cf8 ();\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 currentPiece\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 drawMatrix\cf8 (\cf5 currentPiece\cf8 .\cf5 matrix\cf8 ,\cf5  currentPiece\cf8 .\cf5 pos\cf8 ,\cf5  context\cf8 ,\cf5  currentPiece\cf8 .\cf5 color\cf8 );\cf5  \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\
\cb3             \cf12 const\cf5  nextCanvasBg \cf8 =\cf5  getComputedStyle\cf8 (\cf5 nextPieceCanvas\cf8 ).\cf5 backgroundColor\cf8 ;\cf5 \cb1 \
\cb3             nextPieceContext\cf8 .\cf5 fillStyle \cf8 =\cf5  nextCanvasBg\cf8 ;\cf5 \cb1 \
\cb3             nextPieceContext\cf8 .\cf5 fillRect\cf8 (\cf14 0\cf8 ,\cf5  \cf14 0\cf8 ,\cf5  nextPieceCanvas\cf8 .\cf5 width \cf8 /\cf5  \cf13 NEXT_PIECE_BLOCK_SIZE\cf8 ,\cf5  nextPieceCanvas\cf8 .\cf5 height \cf8 /\cf5  \cf13 NEXT_PIECE_BLOCK_SIZE\cf8 );\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 nextPiece \cf8 &&\cf5  nextPiece\cf8 .\cf5 matrix\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 \cf12 const\cf5  offsetX \cf8 =\cf5  \cf8 (\cf13 NEXT_PIECE_COLS\cf5  \cf8 -\cf5  nextPiece\cf8 .\cf5 matrix\cf8 [\cf14 0\cf8 ].\cf5 length\cf8 )\cf5  \cf8 /\cf5  \cf14 2\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 const\cf5  offsetY \cf8 =\cf5  \cf8 (\cf13 NEXT_PIECE_ROWS\cf5  \cf8 -\cf5  nextPiece\cf8 .\cf5 matrix\cf8 .\cf5 length\cf8 )\cf5  \cf8 /\cf5  \cf14 2\cf8 ;\cf5 \cb1 \
\cb3                 drawMatrix\cf8 (\cf5 nextPiece\cf8 .\cf5 matrix\cf8 ,\cf5  \cf8 \{\cf5 x\cf8 :\cf5  offsetX\cf8 ,\cf5  y\cf8 :\cf5  offsetY\cf8 \},\cf5  nextPieceContext\cf8 ,\cf5  nextPiece\cf8 .\cf5 color\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 function\cf5  gameLoop\cf8 (\cf5 time \cf8 =\cf5  \cf14 0\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 gameOver \cf8 ||\cf5  \cf8 !\cf5 gameStarted\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 \cf12 return\cf8 ;\cf5  \cb1 \
\cb3             \cf8 \}\cf5  \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 isPaused\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 animationFrameId \cf8 =\cf5  requestAnimationFrame\cf8 (\cf5 gameLoop\cf8 );\cf5  \cb1 \
\cb3                 \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\
\cb3             \cf12 const\cf5  deltaTime \cf8 =\cf5  time \cf8 -\cf5  lastTime\cf8 ;\cf5 \cb1 \
\cb3             lastTime \cf8 =\cf5  time\cf8 ;\cf5 \cb1 \
\cb3             dropCounter \cf8 +=\cf5  deltaTime\cf8 ;\cf5 \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 dropCounter \cf8 >\cf5  dropInterval\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 pieceDrop\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\
\cb3             draw\cf8 ();\cf5 \cb1 \
\cb3             animationFrameId \cf8 =\cf5  requestAnimationFrame\cf8 (\cf5 gameLoop\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         document\cf8 .\cf5 addEventListener\cf8 (\cf9 'keydown'\cf8 ,\cf5  event \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 gameStarted \cf8 ||\cf5  gameOver \cf8 ||\cf5  isPaused\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'ArrowUp'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'ArrowDown'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 ' '\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 event\cf8 .\cf5 preventDefault\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\
\cb3             \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'ArrowLeft'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'a'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'A'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 pieceMove\cf8 (-\cf14 1\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'ArrowRight'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'd'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'D'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 pieceMove\cf8 (\cf14 1\cf8 );\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'ArrowDown'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 's'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'S'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 pieceDrop\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'ArrowUp'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'w'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'W'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 pieceRotate\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 ' '\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (!\cf5 currentPiece\cf8 )\cf5  \cf12 return\cf8 ;\cf5  \cb1 \
\cb3                 \cf12 while\cf5  \cf8 (!\cf5 checkCollision\cf8 (\cf5 board\cf8 ,\cf5  currentPiece\cf8 ))\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y\cf8 ++;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3                 currentPiece\cf8 .\cf5 pos\cf8 .\cf5 y\cf8 --;\cf5 \cb1 \
\cb3                 pieceDrop\cf8 ();\cf5  \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf12 if\cf5  \cf8 (\cf5 event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'p'\cf5  \cf8 ||\cf5  event\cf8 .\cf5 key \cf8 ===\cf5  \cf9 'P'\cf8 )\cf5  \cf8 \{\cf5  \cb1 \
\cb3                 togglePause\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \});\cf5 \cb1 \
\cb3         \cb1 \
\cb3         \cf12 function\cf5  togglePause\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (!\cf5 gameStarted \cf8 ||\cf5  gameOver\cf8 )\cf5  \cf12 return\cf8 ;\cf5 \cb1 \
\cb3             isPaused \cf8 =\cf5  \cf8 !\cf5 isPaused\cf8 ;\cf5 \cb1 \
\cb3             \cf12 if\cf5  \cf8 (\cf5 isPaused\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Juego Pausado"\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 pauseButton\cf8 )\cf5  pauseButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Reanudar"\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 animationFrameId\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     cancelAnimationFrame\cf8 (\cf5 animationFrameId\cf8 );\cf5 \cb1 \
\cb3                     animationFrameId \cf8 =\cf5  \cf12 null\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 ""\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf5 pauseButton\cf8 )\cf5  pauseButton\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Pausar"\cf8 ;\cf5 \cb1 \
\cb3                 lastTime \cf8 =\cf5  performance\cf8 .\cf5 now\cf8 ();\cf5  \cb1 \
\cb3                 dropCounter \cf8 =\cf5  \cf14 0\cf8 ;\cf5  \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (!\cf5 animationFrameId\cf8 )\cf5  animationFrameId \cf8 =\cf5  requestAnimationFrame\cf8 (\cf5 gameLoop\cf8 );\cf5  \cb1 \
\cb3             \cf8 \}\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf11 // --- Event Listeners para Botones ---\cf5 \cb1 \
\cb3         \cf12 if\cf5  \cf8 (\cf5 continueToLevelSelectButton\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             continueToLevelSelectButton\cf8 .\cf5 addEventListener\cf8 (\cf9 'click'\cf8 ,\cf5  \cf8 ()\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf12 typeof\cf5  \cf13 Tone\cf5  \cf8 !==\cf5  \cf9 'undefined'\cf5  \cf8 &&\cf5  \cf13 Tone\cf8 .\cf5 context\cf8 .\cf5 state \cf8 !==\cf5  \cf9 'running'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf13 Tone\cf8 .\cf5 start\cf8 ();\cf5  \cf11 // Iniciar contexto de audio en interacci\'f3n del usuario\cf5 \cb1 \
\cb3                     console\cf8 .\cf5 log\cf8 (\cf9 "Contexto de Audio de Tone.js iniciado."\cf8 );\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3                 playerName \cf8 =\cf5  playerNameInput\cf8 .\cf5 value\cf8 .\cf5 trim\cf8 ();\cf5 \cb1 \
\cb3                 playerAge \cf8 =\cf5  playerAgeInput\cf8 .\cf5 value\cf8 .\cf5 trim\cf8 ();\cf5 \cb1 \
\
\cb3                 \cf12 if\cf5  \cf8 (!\cf5 playerName \cf8 ||\cf5  \cf8 !\cf5 playerAge\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf12 if\cf5  \cf8 (\cf5 messageArea\cf8 )\cf5  messageArea\cf8 .\cf5 textContent \cf8 =\cf5  \cf9 "Por favor, ingresa tu nombre y edad."\cf8 ;\cf5 \cb1 \
\cb3                     \cf12 return\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3                 console\cf8 .\cf5 log\cf8 (\cf9 "Nombre:"\cf8 ,\cf5  playerName\cf8 ,\cf5  \cf9 "Edad:"\cf8 ,\cf5  playerAge\cf8 );\cf5 \cb1 \
\cb3                 showLevelSelectionMenu\cf8 ();\cf5 \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3             console\cf8 .\cf5 error\cf8 (\cf9 "Bot\'f3n 'Continuar' del men\'fa de info no encontrado."\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\
\cb3         \cf12 if\cf5  \cf8 (\cf5 mainActionButton\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             mainActionButton\cf8 .\cf5 addEventListener\cf8 (\cf9 'click'\cf8 ,\cf5  \cf8 ()\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 showPlayerInfoMenu\cf8 ();\cf5  \cf11 // Volver al men\'fa de informaci\'f3n del jugador\cf5 \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3             console\cf8 .\cf5 error\cf8 (\cf9 "Error: Bot\'f3n principal (mainActionButton) no encontrado."\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 if\cf5  \cf8 (\cf5 pauseButton\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             pauseButton\cf8 .\cf5 addEventListener\cf8 (\cf9 'click'\cf8 ,\cf5  togglePause\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3             console\cf8 .\cf5 error\cf8 (\cf9 "Error: Bot\'f3n de pausa (pauseButton) no encontrado."\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\
\cb3         \cf12 if\cf5  \cf8 (\cf5 soundButton\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3             soundButton\cf8 .\cf5 addEventListener\cf8 (\cf9 'click'\cf8 ,\cf5  \cf8 ()\cf5  \cf8 =>\cf5  \cf8 \{\cf5 \cb1 \
\cb3                 soundEnabled \cf8 =\cf5  \cf8 !\cf5 soundEnabled\cf8 ;\cf5 \cb1 \
\cb3                 soundButton\cf8 .\cf5 textContent \cf8 =\cf5  soundEnabled \cf8 ?\cf5  \cf9 "Sonido On"\cf5  \cf8 :\cf5  \cf9 "Sonido Off"\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf12 typeof\cf5  \cf13 Tone\cf5  \cf8 !==\cf5  \cf9 'undefined'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf13 Tone\cf8 .\cf13 Destination\cf8 .\cf5 mute \cf8 =\cf5  \cf8 !\cf5 soundEnabled\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3             console\cf8 .\cf5 error\cf8 (\cf9 "Bot\'f3n de sonido no encontrado."\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3         window\cf8 .\cf5 onload \cf8 =\cf5  \cf12 function\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             showPlayerInfoMenu\cf8 ();\cf5  \cf11 // Mostrar el men\'fa de informaci\'f3n del jugador al cargar\cf5 \cb1 \
\cb3         \cf8 \};\cf5 \cb1 \
\
\cb3     \cf6 </\cf2 script\cf6 >\cf5 \cb1 \
\cf6 \cb3 </\cf2 body\cf6 >\cf5 \cb1 \
\cf6 \cb3 </\cf2 html\cf6 >\cf5 \cb1 \
\
\cb3 soundEnabled \cf8 =\cf5  \cf8 !\cf5 soundEnabled\cf8 ;\cf5 \cb1 \
\cb3                 soundButton\cf8 .\cf5 textContent \cf8 =\cf5  soundEnabled \cf8 ?\cf5  \cf9 "Sonido On"\cf5  \cf8 :\cf5  \cf9 "Sonido Off"\cf8 ;\cf5 \cb1 \
\cb3                 \cf12 if\cf5  \cf8 (\cf12 typeof\cf5  \cf13 Tone\cf5  \cf8 !==\cf5  \cf9 'undefined'\cf8 )\cf5  \cf8 \{\cf5 \cb1 \
\cb3                     \cf13 Tone\cf8 .\cf13 Destination\cf8 .\cf5 mute \cf8 =\cf5  \cf8 !\cf5 soundEnabled\cf8 ;\cf5 \cb1 \
\cb3                 \cf8 \}\cf5 \cb1 \
\cb3             \cf8 \});\cf5 \cb1 \
\cb3         \cf8 \}\cf5  \cf12 else\cf5  \cf8 \{\cf5 \cb1 \
\cb3             console\cf8 .\cf5 error\cf8 (\cf9 "Bot\'f3n de sonido no encontrado."\cf8 );\cf5 \cb1 \
\cb3         \cf8 \}\cf5 \cb1 \
\cb3         \cb1 \
\cb3         window\cf8 .\cf5 onload \cf8 =\cf5  \cf12 function\cf8 ()\cf5  \cf8 \{\cf5 \cb1 \
\cb3             showPlayerInfoMenu\cf8 ();\cf5  \cf11 // Mostrar el men\'fa de informaci\'f3n del jugador al cargar\cf5 \cb1 \
\cb3         \cf8 \};\cf5 \cb1 \
\
\cb3     \cf6 </\cf2 script\cf6 >\cf5 \cb1 \
\cf6 \cb3 </\cf2 body\cf6 >\cf5 \cb1 \
\cf6 \cb3 </\cf2 html\cf6 >\cf5 \cb1 \
\
}